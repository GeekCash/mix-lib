module.exports=function(t){var e={};function r(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=t,r.c=e,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=43)}([function(t,e){t.exports=require("lodash")},function(t,e,r){"use strict";var i=r(6),n=r(0);t.exports={checkState:function(t,e){if(!t)throw new i.InvalidState(e)},checkArgument:function(t,e,r,n){if(!t)throw new i.InvalidArgument(e,r,n)},checkArgumentType:function(t,e,s){if(s=s||"(unknown name)",n.isString(e)){if("Buffer"===e){if(!r(10).Buffer.isBuffer(t))throw new i.InvalidArgumentType(t,e,s)}else if(typeof t!==e)throw new i.InvalidArgumentType(t,e,s)}else if(!(t instanceof e))throw new i.InvalidArgumentType(t,e.name,s)}}},function(t,e,r){"use strict";var i=r(10),n=r(22),s=r(3),o=r(1);function u(t,e){if(t.length!==e.length)return!1;for(var r=t.length,i=0;i<r;i++)if(t[i]!==e[i])return!1;return!0}t.exports={fill:function(t,e){o.checkArgumentType(t,"Buffer","buffer"),o.checkArgumentType(e,"number","value");for(var r=t.length,i=0;i<r;i++)t[i]=e;return t},copy:function(t){var e=Buffer.alloc(t.length);return t.copy(e),e},isBuffer:function(t){return i.Buffer.isBuffer(t)||t instanceof Uint8Array},emptyBuffer:function(t){o.checkArgumentType(t,"number","bytes");for(var e=new i.Buffer(t),r=0;r<t;r++)e.write("\0",r);return e},concat:i.Buffer.concat,equals:u,equal:u,integerAsSingleByteBuffer:function(t){return o.checkArgumentType(t,"number","integer"),new i.Buffer([255&t])},integerAsBuffer:function(t){o.checkArgumentType(t,"number","integer");var e=[];return e.push(t>>24&255),e.push(t>>16&255),e.push(t>>8&255),e.push(255&t),Buffer.from(e)},integerFromBuffer:function(t){return o.checkArgumentType(t,"Buffer","buffer"),t[0]<<24|t[1]<<16|t[2]<<8|t[3]},integerFromSingleByteBuffer:function(t){return o.checkArgumentType(t,"Buffer","buffer"),t[0]},bufferToHex:function(t){return o.checkArgumentType(t,"Buffer","buffer"),t.toString("hex")},reverse:function(t){for(var e=new i.Buffer(t.length),r=0;r<t.length;r++)e[r]=t[t.length-r-1];return e},hexToBuffer:function(t){return n(s.isHexa(t)),new i.Buffer(t,"hex")}},t.exports.NULL_HASH=t.exports.fill(Buffer.alloc(32),0),t.exports.EMPTY_BUFFER=Buffer.alloc(0)},function(t,e,r){"use strict";var i=r(0),n=function(t){return!!i.isString(t)&&/^[0-9a-fA-F]+$/.test(t)};t.exports={isValidJSON:function(t){var e;if(!i.isString(t))return!1;try{e=JSON.parse(t)}catch(t){return!1}return"object"==typeof e},isHexa:n,isHexaString:n,cloneArray:function(t){return[].concat(t)},defineImmutable:function(t,e){return Object.keys(e).forEach(function(r){Object.defineProperty(t,r,{configurable:!1,enumerable:!0,value:e[r]})}),t},isNaturalNumber:function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t&&t>=0}}},function(t,e,r){"use strict";var i=r(34),n=r(1),s=r(0),o=function(t){for(var e=Buffer.alloc(t.length),r=0;r<t.length;r++)e[r]=t[t.length-1-r];return e};i.Zero=new i(0),i.One=new i(1),i.Minus1=new i(-1),i.fromNumber=function(t){return n.checkArgument(s.isNumber(t)),new i(t)},i.fromString=function(t,e){return n.checkArgument(s.isString(t)),new i(t,e)},i.fromBuffer=function(t,e){void 0!==e&&"little"===e.endian&&(t=o(t));var r=t.toString("hex");return new i(r,16)},i.fromSM=function(t,e){var r;if(0===t.length)return i.fromBuffer(Buffer.from([0]));var n="big";return e&&(n=e.endian),"little"===n&&(t=o(t)),128&t[0]?(t[0]=127&t[0],(r=i.fromBuffer(t)).neg().copy(r)):r=i.fromBuffer(t),r},i.prototype.toNumber=function(){return parseInt(this.toString(10),10)},i.prototype.toBuffer=function(t){var e,r;if(t&&t.size){var n=(r=this.toString(16,2)).length/2;e=Buffer.from(r,"hex"),n===t.size?e=e:n>t.size?e=i.trim(e,n):n<t.size&&(e=i.pad(e,n,t.size))}else r=this.toString(16,2),e=Buffer.from(r,"hex");return void 0!==t&&"little"===t.endian&&(e=o(e)),e},i.prototype.toSMBigEndian=function(){var t;return-1===this.cmp(i.Zero)?128&(t=this.neg().toBuffer())[0]?t=Buffer.concat([Buffer.from([128]),t]):t[0]=128|t[0]:128&(t=this.toBuffer())[0]&&(t=Buffer.concat([Buffer.from([0]),t])),1===t.length&0===t[0]&&(t=Buffer.from([])),t},i.prototype.toSM=function(t){var e=t?t.endian:"big",r=this.toSMBigEndian();return"little"===e&&(r=o(r)),r},i.fromScriptNumBuffer=function(t,e,r){var s=r||4;if(n.checkArgument(t.length<=s,new Error("script number overflow")),e&&t.length>0&&0==(127&t[t.length-1])&&(t.length<=1||0==(128&t[t.length-2])))throw new Error("non-minimally encoded script number");return i.fromSM(t,{endian:"little"})},i.prototype.toScriptNumBuffer=function(){return this.toSM({endian:"little"})},i.prototype.gt=function(t){return this.cmp(t)>0},i.prototype.gte=function(t){return this.cmp(t)>=0},i.prototype.lt=function(t){return this.cmp(t)<0},i.trim=function(t,e){return t.slice(e-t.length,t.length)},i.pad=function(t,e,r){for(var i=Buffer.alloc(r),n=0;n<t.length;n++)i[i.length-1-n]=t[t.length-1-n];for(n=0;n<r-e;n++)i[n]=0;return i},t.exports=i},function(t,e,r){"use strict";var i=r(36),n=r(2),s=r(1),o=t.exports;o.sha1=function(t){return s.checkArgument(n.isBuffer(t)),i.createHash("sha1").update(t).digest()},o.sha1.blocksize=512,o.sha256=function(t){return s.checkArgument(n.isBuffer(t)),i.createHash("sha256").update(t).digest()},o.sha256.blocksize=512,o.sha256sha256=function(t){return s.checkArgument(n.isBuffer(t)),o.sha256(o.sha256(t))},o.ripemd160=function(t){return s.checkArgument(n.isBuffer(t)),i.createHash("ripemd160").update(t).digest()},o.sha256ripemd160=function(t){return s.checkArgument(n.isBuffer(t)),o.ripemd160(o.sha256(t))},o.sha512=function(t){return s.checkArgument(n.isBuffer(t)),i.createHash("sha512").update(t).digest()},o.sha512.blocksize=1024,o.hmac=function(t,e,r){s.checkArgument(n.isBuffer(e)),s.checkArgument(n.isBuffer(r)),s.checkArgument(t.blocksize);var i=t.blocksize/8;if(r.length>i)r=t(r);else if(r<i){var o=Buffer.alloc(i);o.fill(0),r.copy(o),r=o}var u=Buffer.alloc(i);u.fill(92);var a=Buffer.alloc(i);a.fill(54);for(var h=Buffer.alloc(i),f=Buffer.alloc(i),c=0;c<i;c++)h[c]=u[c]^r[c],f[c]=a[c]^r[c];return t(Buffer.concat([h,t(Buffer.concat([f,e]))]))},o.sha256hmac=function(t,e){return o.hmac(o.sha256,t,e)},o.sha512hmac=function(t,e){return o.hmac(o.sha512,t,e)}},function(t,e,r){"use strict";var i=r(0);var n=function(t,e){var r=function(){if(i.isString(e.message))this.message=function(t,e){return t.replace("{0}",e[0]).replace("{1}",e[1]).replace("{2}",e[2])}(e.message,arguments);else{if(!i.isFunction(e.message))throw new Error("Invalid error definition for "+e.name);this.message=e.message.apply(null,arguments)}this.stack=this.message+"\n"+(new Error).stack};return(r.prototype=Object.create(t.prototype)).name=t.prototype.name+e.name,t[e.name]=r,e.errors&&s(r,e.errors),r},s=function(t,e){i.each(e,function(e){n(t,e)})},o={Error:function(){this.message="Internal error",this.stack=this.message+"\n"+(new Error).stack}};o.Error.prototype=Object.create(Error.prototype),o.Error.prototype.name="bitcore.Error";var u=r(45);!function(t,e){s(t,e)}(o.Error,u),t.exports=o.Error,t.exports.extend=function(t){return n(o.Error,t)}},function(t,e,r){"use strict";var i=r(4),n=r(0),s=r(1),o=r(2),u=r(3),a=function t(e,r){if(!(this instanceof t))return new t(e,r);if(e instanceof i)this.set({r:e,s:r});else if(e){var n=e;this.set(n)}};a.prototype.set=function(t){return this.r=t.r||this.r||void 0,this.s=t.s||this.s||void 0,this.i=void 0!==t.i?t.i:this.i,this.compressed=void 0!==t.compressed?t.compressed:this.compressed,this.nhashtype=t.nhashtype||this.nhashtype||void 0,this},a.fromCompact=function(t){s.checkArgument(o.isBuffer(t),"Argument is expected to be a Buffer");var e=new a,r=!0,n=t.slice(0,1)[0]-27-4;n<0&&(r=!1,n+=4);var u=t.slice(1,33),h=t.slice(33,65);return s.checkArgument(0===n||1===n||2===n||3===n,new Error("i must be 0, 1, 2, or 3")),s.checkArgument(32===u.length,new Error("r must be 32 bytes")),s.checkArgument(32===h.length,new Error("s must be 32 bytes")),e.compressed=r,e.i=n,e.r=i.fromBuffer(u),e.s=i.fromBuffer(h),e},a.fromDER=a.fromBuffer=function(t,e){var r=a.parseDER(t,e),i=new a;return i.r=r.r,i.s=r.s,i},a.fromTxFormat=function(t){var e=t.readUInt8(t.length-1),r=t.slice(0,t.length-1),i=new a.fromDER(r,!1);return i.nhashtype=e,i},a.fromString=function(t){var e=Buffer.from(t,"hex");return a.fromDER(e)},a.parseDER=function(t,e){s.checkArgument(o.isBuffer(t),new Error("DER formatted signature should be a buffer")),n.isUndefined(e)&&(e=!0);var r=t[0];s.checkArgument(48===r,new Error("Header byte should be 0x30"));var u=t[1],a=t.slice(2).length;s.checkArgument(!e||u===a,new Error("Length byte should length of what follows")),u=u<a?u:a;var h=t[2];s.checkArgument(2===h,new Error("Integer byte for r should be 0x02"));var f=t[3],c=t.slice(4,4+f),p=i.fromBuffer(c),d=0===t[4];s.checkArgument(f===c.length,new Error("Length of r incorrect"));var l=t[4+f+0];s.checkArgument(2===l,new Error("Integer byte for s should be 0x02"));var g=t[4+f+1],m=t.slice(4+f+2,4+f+2+g),y=i.fromBuffer(m),_=0===t[4+f+2+2];s.checkArgument(g===m.length,new Error("Length of s incorrect"));var S=4+f+2+g;return s.checkArgument(u===S-2,new Error("Length of signature incorrect")),{header:r,length:u,rheader:h,rlength:f,rneg:d,rbuf:c,r:p,sheader:l,slength:g,sneg:_,sbuf:m,s:y}},a.prototype.toCompact=function(t,e){if(t="number"==typeof t?t:this.i,e="boolean"==typeof e?e:this.compressed,0!==t&&1!==t&&2!==t&&3!==t)throw new Error("i must be equal to 0, 1, 2, or 3");var r=t+27+4;!1===e&&(r-=4);var i=Buffer.from([r]),n=this.r.toBuffer({size:32}),s=this.s.toBuffer({size:32});return Buffer.concat([i,n,s])},a.prototype.toBuffer=a.prototype.toDER=function(){var t=this.r.toBuffer(),e=this.s.toBuffer(),r=!!(128&t[0]),i=!!(128&e[0]),n=r?Buffer.concat([Buffer.from([0]),t]):t,s=i?Buffer.concat([Buffer.from([0]),e]):e,o=n.length,u=s.length,a=2+o+2+u;return Buffer.concat([Buffer.from([48,a,2,o]),n,Buffer.from([2,u]),s])},a.prototype.toString=function(){return this.toDER().toString("hex")},a.isTxDER=function(t){if(t.length<9)return!1;if(t.length>73)return!1;if(48!==t[0])return!1;if(t[1]!==t.length-3)return!1;var e=t[3];if(5+e>=t.length)return!1;var r=t[5+e];if(e+r+7!==t.length)return!1;var i=t.slice(4);if(2!==t[2])return!1;if(0===e)return!1;if(128&i[0])return!1;if(e>1&&0===i[0]&&!(128&i[1]))return!1;var n=t.slice(6+e);return 2===t[6+e-2]&&(0!==r&&(!(128&n[0])&&!(r>1&&0===n[0]&&!(128&n[1]))))},a.prototype.hasLowS=function(){return!this.s.lt(new i(1))&&!this.s.gt(new i("7FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF5D576E7357A4501DDFE92F46681B20A0","hex"))},a.prototype.hasDefinedHashtype=function(){if(!u.isNaturalNumber(this.nhashtype))return!1;var t=this.nhashtype&~a.SIGHASH_ANYONECANPAY;return!(t<a.SIGHASH_ALL||t>a.SIGHASH_SINGLE)},a.prototype.toTxFormat=function(){var t=this.toDER(),e=Buffer.alloc(1);return e.writeUInt8(this.nhashtype,0),Buffer.concat([t,e])},a.SIGHASH_ALL=1,a.SIGHASH_NONE=2,a.SIGHASH_SINGLE=3,a.SIGHASH_ANYONECANPAY=128,t.exports=a},function(t,e,r){t.exports=r(38),t.exports.Interpreter=r(47)},function(t,e,r){"use strict";var i=r(2),n=r(22),s=function t(e){if(!(this instanceof t))return new t(e);this.bufLen=0,e?this.set(e):this.bufs=[]};s.prototype.set=function(t){return this.bufs=t.bufs||this.bufs||[],this.bufLen=this.bufs.reduce(function(t,e){return t+e.length},0),this},s.prototype.toBuffer=function(){return this.concat()},s.prototype.concat=function(){return Buffer.concat(this.bufs,this.bufLen)},s.prototype.write=function(t){return n(i.isBuffer(t)),this.bufs.push(t),this.bufLen+=t.length,this},s.prototype.writeReverse=function(t){return n(i.isBuffer(t)),this.bufs.push(i.reverse(t)),this.bufLen+=t.length,this},s.prototype.writeUInt8=function(t){var e=Buffer.alloc(1);return e.writeUInt8(t,0),this.write(e),this},s.prototype.writeUInt16BE=function(t){var e=Buffer.alloc(2);return e.writeUInt16BE(t,0),this.write(e),this},s.prototype.writeUInt16LE=function(t){var e=Buffer.alloc(2);return e.writeUInt16LE(t,0),this.write(e),this},s.prototype.writeUInt32BE=function(t){var e=Buffer.alloc(4);return e.writeUInt32BE(t,0),this.write(e),this},s.prototype.writeInt32LE=function(t){var e=Buffer.alloc(4);return e.writeInt32LE(t,0),this.write(e),this},s.prototype.writeUInt32LE=function(t){var e=Buffer.alloc(4);return e.writeUInt32LE(t,0),this.write(e),this},s.prototype.writeUInt64BEBN=function(t){var e=t.toBuffer({size:8});return this.write(e),this},s.prototype.writeUInt64LEBN=function(t){var e=t.toBuffer({size:8});return this.writeReverse(e),this},s.prototype.writeVarintNum=function(t){var e=s.varintBufNum(t);return this.write(e),this},s.prototype.writeVarintBN=function(t){var e=s.varintBufBN(t);return this.write(e),this},s.varintBufNum=function(t){var e=void 0;return t<253?(e=Buffer.alloc(1)).writeUInt8(t,0):t<65536?((e=Buffer.alloc(3)).writeUInt8(253,0),e.writeUInt16LE(t,1)):t<4294967296?((e=Buffer.alloc(5)).writeUInt8(254,0),e.writeUInt32LE(t,1)):((e=Buffer.alloc(9)).writeUInt8(255,0),e.writeInt32LE(-1&t,1),e.writeUInt32LE(Math.floor(t/4294967296),5)),e},s.varintBufBN=function(t){var e=void 0,r=t.toNumber();if(r<253)(e=Buffer.alloc(1)).writeUInt8(r,0);else if(r<65536)(e=Buffer.alloc(3)).writeUInt8(253,0),e.writeUInt16LE(r,1);else if(r<4294967296)(e=Buffer.alloc(5)).writeUInt8(254,0),e.writeUInt32LE(r,1);else{var i=new s;i.writeUInt8(255),i.writeUInt64LEBN(t);e=i.concat()}return e},t.exports=s},function(t,e){t.exports=require("buffer")},function(t,e,r){"use strict";var i=r(4),n=r(17),s=r(5),o=r(3),u=r(15),a=r(0),h=r(1);function f(t,e){if(!(this instanceof f))return new f(t,e);if(h.checkArgument(t,"First argument is required, please include public key data."),t instanceof f)return t;e=e||{};var r=this._classifyArgs(t,e);return r.point.validate(),o.defineImmutable(this,{point:r.point,compressed:r.compressed,network:r.network||u.defaultNetwork}),this}f.prototype._classifyArgs=function(t,e){var r={compressed:a.isUndefined(e.compressed)||e.compressed};if(t instanceof n)r.point=t;else if(t.x&&t.y)r=f._transformObject(t);else if("string"==typeof t)r=f._transformDER(Buffer.from(t,"hex"));else if(f._isBuffer(t))r=f._transformDER(t);else{if(!f._isPrivateKey(t))throw new TypeError("First argument is an unrecognized data format.");r=f._transformPrivateKey(t)}return r.network||(r.network=a.isUndefined(e.network)?void 0:u.get(e.network)),r},f._isPrivateKey=function(t){return t instanceof r(23)},f._isBuffer=function(t){return t instanceof Buffer||t instanceof Uint8Array},f._transformPrivateKey=function(t){h.checkArgument(f._isPrivateKey(t),"Must be an instance of PrivateKey");var e={};return e.point=n.getG().mul(t.bn),e.compressed=t.compressed,e.network=t.network,e},f._transformDER=function(t,e){h.checkArgument(f._isBuffer(t),"Must be a hex buffer of DER encoded public key");var r,s,o,u,c={};if(e=!!a.isUndefined(e)||e,4!==t[0]&&(e||6!==t[0]&&7!==t[0]))if(3===t[0])o=t.slice(1),r=new i(o),(c=f._transformX(!0,r)).compressed=!0;else{if(2!==t[0])throw new TypeError("Invalid DER format public key");o=t.slice(1),r=new i(o),(c=f._transformX(!1,r)).compressed=!0}else{if(o=t.slice(1,33),u=t.slice(33,65),32!==o.length||32!==u.length||65!==t.length)throw new TypeError("Length of x and y must be 32 bytes");r=new i(o),s=new i(u),c.point=new n(r,s),c.compressed=!1}return c},f._transformX=function(t,e){h.checkArgument("boolean"==typeof t,"Must specify whether y is odd or not (true or false)");var r={};return r.point=n.fromX(t,e),r},f._transformObject=function(t){var e=new i(t.x,"hex"),r=new i(t.y,"hex");return new f(new n(e,r),{compressed:t.compressed})},f.fromPrivateKey=function(t){h.checkArgument(f._isPrivateKey(t),"Must be an instance of PrivateKey");var e=f._transformPrivateKey(t);return new f(e.point,{compressed:e.compressed,network:e.network})},f.fromDER=f.fromBuffer=function(t,e){h.checkArgument(f._isBuffer(t),"Must be a hex buffer of DER encoded public key");var r=f._transformDER(t,e);return new f(r.point,{compressed:r.compressed})},f.fromPoint=function(t,e){return h.checkArgument(t instanceof n,"First argument must be an instance of Point."),new f(t,{compressed:e})},f.fromString=function(t,e){var r=Buffer.from(t,e||"hex"),i=f._transformDER(r);return new f(i.point,{compressed:i.compressed})},f.fromX=function(t,e){var r=f._transformX(t,e);return new f(r.point,{compressed:r.compressed})},f.getValidationError=function(t){var e;try{new f(t)}catch(t){e=t}return e},f.isValid=function(t){return!f.getValidationError(t)},f.prototype.toObject=f.prototype.toJSON=function(){return{x:this.point.getX().toString("hex",2),y:this.point.getY().toString("hex",2),compressed:this.compressed}},f.prototype.toBuffer=f.prototype.toDER=function(){var t,e=this.point.getX(),r=this.point.getY(),i=e.toBuffer({size:32}),n=r.toBuffer({size:32});return this.compressed?(t=n[n.length-1]%2?Buffer.from([3]):Buffer.from([2]),Buffer.concat([t,i])):(t=Buffer.from([4]),Buffer.concat([t,i,n]))},f.prototype._getID=function(){return s.sha256ripemd160(this.toBuffer())},f.prototype.toAddress=function(t){return r(16).fromPublicKey(this,t||this.network)},f.prototype.toString=function(){return this.toDER().toString("hex")},f.prototype.inspect=function(){return"<PublicKey: "+this.toString()+(this.compressed?"":", uncompressed")+">"},t.exports=f},function(t,e,r){"use strict";var i=r(0),n=r(1),s=r(2),o=r(4),u=function t(e){if(!(this instanceof t))return new t(e);if(!i.isUndefined(e))if(Buffer.isBuffer(e))this.set({buf:e});else if(i.isString(e))this.set({buf:Buffer.from(e,"hex")});else{if(!i.isObject(e))throw new TypeError("Unrecognized argument for BufferReader");var r=e;this.set(r)}};u.prototype.set=function(t){return this.buf=t.buf||this.buf||void 0,this.pos=t.pos||this.pos||0,this},u.prototype.eof=function(){return this.pos>=this.buf.length},u.prototype.finished=u.prototype.eof,u.prototype.read=function(t){n.checkArgument(!i.isUndefined(t),"Must specify a length");var e=this.buf.slice(this.pos,this.pos+t);return this.pos=this.pos+t,e},u.prototype.readAll=function(){var t=this.buf.slice(this.pos,this.buf.length);return this.pos=this.buf.length,t},u.prototype.readUInt8=function(){var t=this.buf.readUInt8(this.pos);return this.pos=this.pos+1,t},u.prototype.readUInt16BE=function(){var t=this.buf.readUInt16BE(this.pos);return this.pos=this.pos+2,t},u.prototype.readUInt16LE=function(){var t=this.buf.readUInt16LE(this.pos);return this.pos=this.pos+2,t},u.prototype.readUInt32BE=function(){var t=this.buf.readUInt32BE(this.pos);return this.pos=this.pos+4,t},u.prototype.readUInt32LE=function(){var t=this.buf.readUInt32LE(this.pos);return this.pos=this.pos+4,t},u.prototype.readInt32LE=function(){var t=this.buf.readInt32LE(this.pos);return this.pos=this.pos+4,t},u.prototype.readUInt64BEBN=function(){var t=this.buf.slice(this.pos,this.pos+8),e=o.fromBuffer(t);return this.pos=this.pos+8,e},u.prototype.readUInt64LEBN=function(){var t,e=this.buf.readUInt32LE(this.pos),r=4294967296*this.buf.readUInt32LE(this.pos+4)+e;if(r<=9007199254740991)t=new o(r);else{var i=Array.prototype.slice.call(this.buf,this.pos,this.pos+8);t=new o(i,10,"le")}return this.pos=this.pos+8,t},u.prototype.readVarintNum=function(){var t=this.readUInt8();switch(t){case 253:return this.readUInt16LE();case 254:return this.readUInt32LE();case 255:var e=this.readUInt64LEBN().toNumber();if(e<=Math.pow(2,53))return e;throw new Error("number too large to retain precision - use readVarintBN");default:return t}},u.prototype.readVarLengthBuffer=function(){var t=this.readVarintNum(),e=this.read(t);return n.checkState(e.length===t,"Invalid length while reading varlength buffer. Expected to read: "+t+" and read "+e.length),e},u.prototype.readVarintBuf=function(){switch(this.buf.readUInt8(this.pos)){case 253:return this.read(3);case 254:return this.read(5);case 255:return this.read(9);default:return this.read(1)}},u.prototype.readVarintBN=function(){var t=this.readUInt8();switch(t){case 253:return new o(this.readUInt16LE());case 254:return new o(this.readUInt32LE());case 255:return this.readUInt64LEBN();default:return new o(t)}},u.prototype.reverse=function(){for(var t=Buffer.alloc(this.buf.length),e=0;e<t.length;e++)t[e]=this.buf[this.buf.length-1-e];return this.buf=t,this},u.prototype.readReverse=function(t){i.isUndefined(t)&&(t=this.buf.length);var e=this.buf.slice(this.pos,this.pos+t);return this.pos=this.pos+t,s.reverse(e)},t.exports=u},function(t,e,r){"use strict";var i=r(0),n=r(4),s=r(10),o=r(2),u=r(3),a=r(9),h=r(8),f=r(1),c=r(6);function p(t){if(!(this instanceof p))return new p(t);if(!i.isObject(t))throw new TypeError("Unrecognized argument for Output");var e;this.satoshis=t.satoshis,o.isBuffer(t.script)?this._scriptBuffer=t.script:(e=i.isString(t.script)&&u.isHexa(t.script)?new s.Buffer(t.script,"hex"):t.script,this.setScript(e))}Object.defineProperty(p.prototype,"script",{configurable:!1,enumerable:!0,get:function(){return this._script?this._script:(this.setScriptFromBuffer(this._scriptBuffer),this._script)}}),Object.defineProperty(p.prototype,"satoshis",{configurable:!1,enumerable:!0,get:function(){return this._satoshis},set:function(t){t instanceof n?(this._satoshisBN=t,this._satoshis=t.toNumber()):i.isString(t)?(this._satoshis=parseInt(t),this._satoshisBN=n.fromNumber(this._satoshis)):(f.checkArgument(u.isNaturalNumber(t),"Output satoshis is not a natural number"),this._satoshisBN=n.fromNumber(t),this._satoshis=t),f.checkState(u.isNaturalNumber(this._satoshis),"Output satoshis is not a natural number")}}),p.prototype.invalidSatoshis=function(){return this._satoshis>9007199254740991?"transaction txout satoshis greater than max safe integer":this._satoshis!==this._satoshisBN.toNumber()?"transaction txout satoshis has corrupted value":this._satoshis<0&&"transaction txout negative"},p.prototype.toObject=p.prototype.toJSON=function(){var t={satoshis:this.satoshis};return t.script=this._scriptBuffer.toString("hex"),t},p.fromObject=function(t){return new p(t)},p.prototype.setScriptFromBuffer=function(t){this._scriptBuffer=t;try{this._script=h.fromBuffer(this._scriptBuffer),this._script._isOutput=!0}catch(t){if(!(t instanceof c.Script.InvalidBuffer))throw t;this._script=null}},p.prototype.setScript=function(t){if(t instanceof h)this._scriptBuffer=t.toBuffer(),this._script=t,this._script._isOutput=!0;else if(i.isString(t))this._script=h.fromString(t),this._scriptBuffer=this._script.toBuffer(),this._script._isOutput=!0;else{if(!o.isBuffer(t))throw new TypeError("Invalid argument type: script");this.setScriptFromBuffer(t)}return this},p.prototype.inspect=function(){var t;return t=this.script?this.script.inspect():this._scriptBuffer.toString("hex"),"<Output ("+this.satoshis+" sats) "+t+">"},p.fromBufferReader=function(t){var e={};e.satoshis=t.readUInt64LEBN();var r=t.readVarintNum();return e.script=0!==r?t.read(r):new s.Buffer([]),new p(e)},p.prototype.toBufferWriter=function(t){t||(t=new a),t.writeUInt64LEBN(this._satoshisBN);var e=this._scriptBuffer;return t.writeVarintNum(e.length),t.write(e),t},t.exports=p},function(t,e,r){"use strict";var i=r(10),n=r(7),s=r(8),o=r(13),u=r(12),a=r(9),h=r(4),f=r(5),c=r(28),p=r(1),d=r(0),l=function(t,e,c,p){var d,l=r(30),g=r(31),m=l.shallowCopy(t);for((p=new s(p)).removeCodeseparators(),d=0;d<m.inputs.length;d++)m.inputs[d]=new g(m.inputs[d]).setScript(s.empty());if(m.inputs[c]=new g(m.inputs[c]).setScript(p),(31&e)===n.SIGHASH_NONE||(31&e)===n.SIGHASH_SINGLE)for(d=0;d<m.inputs.length;d++)d!==c&&(m.inputs[d].sequenceNumber=0);if((31&e)===n.SIGHASH_NONE)m.outputs=[];else if((31&e)===n.SIGHASH_SINGLE){if(c>=m.outputs.length)return Buffer.from("0000000000000000000000000000000000000000000000000000000000000001","hex");for(m.outputs.length=c+1,d=0;d<c;d++)m.outputs[d]=new o({satoshis:h.fromBuffer(new i.Buffer("ffffffffffffffff","hex")),script:s.empty()})}e&n.SIGHASH_ANYONECANPAY&&(m.inputs=[m.inputs[c]]);var y=(new a).write(m.toBuffer()).writeInt32LE(e).toBuffer(),_=f.sha256sha256(y);return _=new u(_).readReverse()};t.exports={sighash:l,sign:function(t,e,r,i,n){var s=l(t,r,i,n);return c.sign(s,e,"little").set({nhashtype:r})},verify:function(t,e,r,i,n){p.checkArgument(!d.isUndefined(t)),p.checkArgument(!d.isUndefined(e)&&!d.isUndefined(e.nhashtype));var s=l(t,e.nhashtype,i,n);return c.verify(s,e,r,"little")}}},function(t,e,r){"use strict";var i=r(0),n=r(2),s=r(3),o=r(46),u=[],a={};function h(){}function f(t,e){if(~u.indexOf(t))return t;if(!e)return a[t];i.isArray(e)||(e=[e]);var r=function(e){return u[n][e]===t};for(var n in u)if(i.some(e,r))return u[n]}function c(t){var e=new h;return s.defineImmutable(e,{name:t.name,alias:t.alias,pubkeyhash:t.pubkeyhash,privatekey:t.privatekey,scripthash:t.scripthash,xpubkey:t.xpubkey,xprivkey:t.xprivkey}),t.networkMagic&&s.defineImmutable(e,{networkMagic:n.integerAsBuffer(t.networkMagic)}),t.port&&s.defineImmutable(e,{port:t.port}),t.dnsSeeds&&s.defineImmutable(e,{dnsSeeds:t.dnsSeeds}),i.each(e,function(t){i.isUndefined(t)||i.isObject(t)||(a[t]=e)}),u.push(e),e}for(var p in h.prototype.toString=function(){return this.name},o)c(o[p]);var d=f("GEEK"),l=f("testnet"),g={PORT:18333,NETWORK_MAGIC:n.integerAsBuffer(185665799),DNS_SEEDS:["testnet-seed.bitcoin.petertodd.org","testnet-seed.bluematt.me","testnet-seed.alexykot.me","testnet-seed.bitcoin.schildbach.de"]};for(var m in g)i.isObject(g[m])||(a[g[m]]=l);var y={PORT:18444,NETWORK_MAGIC:n.integerAsBuffer(4206867930),DNS_SEEDS:[]};for(var m in y)i.isObject(y[m])||(a[y[m]]=l);Object.defineProperty(l,"port",{enumerable:!0,configurable:!1,get:function(){return this.regtestEnabled?y.PORT:g.PORT}}),Object.defineProperty(l,"networkMagic",{enumerable:!0,configurable:!1,get:function(){return this.regtestEnabled?y.NETWORK_MAGIC:g.NETWORK_MAGIC}}),Object.defineProperty(l,"dnsSeeds",{enumerable:!0,configurable:!1,get:function(){return this.regtestEnabled?y.DNS_SEEDS:g.DNS_SEEDS}}),t.exports={add:c,remove:function(t){for(var e=0;e<u.length;e++)u[e]===t&&u.splice(e,1);for(var r in a)a[r]===t&&delete a[r]},defaultNetwork:d,livenet:d,mainnet:d,testnet:l,get:f,enableRegtest:function(){l.regtestEnabled=!0},disableRegtest:function(){l.regtestEnabled=!1}}},function(t,e,r){"use strict";var i=r(0),n=r(1),s=r(6),o=r(18),u=r(15),a=r(5),h=r(3),f=r(11);function c(t,e,r){if(!(this instanceof c))return new c(t,e,r);if(i.isArray(t)&&i.isNumber(e))return c.createMultisig(t,e,r);if(t instanceof c)return t;if(n.checkArgument(t,"First argument is required, please include address data.","guide/address.html"),e&&!u.get(e))throw new TypeError('Second argument must be "livenet" or "testnet".');if(r&&r!==c.PayToPublicKeyHash&&r!==c.PayToScriptHash)throw new TypeError('Third argument must be "pubkeyhash" or "scripthash".');var s=this._classifyArguments(t,e,r);return s.network=s.network||u.get(e)||u.defaultNetwork,s.type=s.type||r||c.PayToPublicKeyHash,h.defineImmutable(this,{hashBuffer:s.hashBuffer,network:s.network,type:s.type}),this}c.prototype._classifyArguments=function(t,e,r){if((t instanceof Buffer||t instanceof Uint8Array)&&20===t.length)return c._transformHash(t);if((t instanceof Buffer||t instanceof Uint8Array)&&21===t.length)return c._transformBuffer(t,e,r);if(t instanceof f)return c._transformPublicKey(t);if(t instanceof p)return c._transformScript(t,e);if("string"==typeof t)return c._transformString(t,e,r);if(i.isObject(t))return c._transformObject(t);throw new TypeError("First argument is an unrecognized data format.")},c.PayToPublicKeyHash="pubkeyhash",c.PayToScriptHash="scripthash",c._transformHash=function(t){var e={};if(!(t instanceof Buffer||t instanceof Uint8Array))throw new TypeError("Address supplied is not a buffer.");if(20!==t.length)throw new TypeError("Address hashbuffers must be exactly 20 bytes.");return e.hashBuffer=t,e},c._transformObject=function(t){return n.checkArgument(t.hash||t.hashBuffer,"Must provide a `hash` or `hashBuffer` property"),n.checkArgument(t.type,"Must provide a `type` property"),{hashBuffer:t.hash?Buffer.from(t.hash,"hex"):t.hashBuffer,network:u.get(t.network)||u.defaultNetwork,type:t.type}},c._classifyFromVersion=function(t){var e={},r=u.get(t[0],"pubkeyhash"),i=u.get(t[0],"scripthash");return r?(e.network=r,e.type=c.PayToPublicKeyHash):i&&(e.network=i,e.type=c.PayToScriptHash),e},c._transformBuffer=function(t,e,r){var i={};if(!(t instanceof Buffer||t instanceof Uint8Array))throw new TypeError("Address supplied is not a buffer.");if(21!==t.length)throw new TypeError("Address buffers must be exactly 21 bytes.");var n=u.get(e),s=c._classifyFromVersion(t);if(e&&!n)throw new TypeError("Unknown network");if(!s.network||n&&n!==s.network)throw new TypeError("Address has mismatched network type.");if(!s.type||r&&r!==s.type)throw new TypeError("Address has mismatched type.");return i.hashBuffer=t.slice(1),i.network=s.network,i.type=s.type,i},c._transformPublicKey=function(t){var e={};if(!(t instanceof f))throw new TypeError("Address must be an instance of PublicKey.");return e.hashBuffer=a.sha256ripemd160(t.toBuffer()),e.type=c.PayToPublicKeyHash,e},c._transformScript=function(t,e){n.checkArgument(t instanceof p,"script must be a Script instance");var r=t.getAddressInfo(e);if(!r)throw new s.Script.CantDeriveAddress(t);return r},c.createMultisig=function(t,e,r,i){r=r||t[0].network||u.defaultNetwork;var n=p.buildMultisigOut(t,e);return i?c.payingTo(p.buildWitnessMultisigOutFromScript(n),r):c.payingTo(n,r)},c._transformString=function(t,e,r){if("string"!=typeof t)throw new TypeError("data parameter supplied is not a string.");t=t.trim();var i=o.decode(t);return c._transformBuffer(i,e,r)},c.fromPublicKey=function(t,e){var r=c._transformPublicKey(t);return e=e||u.defaultNetwork,new c(r.hashBuffer,e,r.type)},c.fromPublicKeyHash=function(t,e){return new c(c._transformHash(t).hashBuffer,e,c.PayToPublicKeyHash)},c.fromScriptHash=function(t,e){return n.checkArgument(t,"hash parameter is required"),new c(c._transformHash(t).hashBuffer,e,c.PayToScriptHash)},c.payingTo=function(t,e){return n.checkArgument(t,"script is required"),n.checkArgument(t instanceof p,"script must be instance of Script"),c.fromScriptHash(a.sha256ripemd160(t.toBuffer()),e)},c.fromScript=function(t,e){n.checkArgument(t instanceof p,"script must be a Script instance");var r=c._transformScript(t,e);return new c(r.hashBuffer,e,r.type)},c.fromBuffer=function(t,e,r){var i=c._transformBuffer(t,e,r);return new c(i.hashBuffer,i.network,i.type)},c.fromString=function(t,e,r){var i=c._transformString(t,e,r);return new c(i.hashBuffer,i.network,i.type)},c.fromObject=function(t){return n.checkState(h.isHexa(t.hash),'Unexpected hash property, "'+t.hash+'", expected to be hex.'),new c(Buffer.from(t.hash,"hex"),t.network,t.type)},c.getValidationError=function(t,e,r){var i;try{new c(t,e,r)}catch(t){i=t}return i},c.isValid=function(t,e,r){return!c.getValidationError(t,e,r)},c.prototype.isPayToPublicKeyHash=function(){return this.type===c.PayToPublicKeyHash},c.prototype.isPayToScriptHash=function(){return this.type===c.PayToScriptHash},c.prototype.toBuffer=function(){var t=Buffer.from([this.network[this.type]]);return Buffer.concat([t,this.hashBuffer])},c.prototype.toObject=c.prototype.toJSON=function(){return{hash:this.hashBuffer.toString("hex"),type:this.type,network:this.network.toString()}},c.prototype.toString=function(){return o.encode(this.toBuffer())},c.prototype.inspect=function(){return"<Address: "+this.toString()+", type: "+this.type+", network: "+this.network+">"},t.exports=c;var p=r(8)},function(t,e,r){"use strict";var i=r(4),n=r(2),s=new(0,r(35).ec)("secp256k1"),o=s.curve.point.bind(s.curve),u=s.curve.pointFromX.bind(s.curve),a=function(t,e,r){try{var i=o(t,e,r)}catch(t){throw new Error("Invalid Point")}return i.validate(),i};a.prototype=Object.getPrototypeOf(s.curve.point()),a.fromX=function(t,e){try{var r=u(e,t)}catch(t){throw new Error("Invalid X")}return r.validate(),r},a.getG=function(){return s.curve.g},a.getN=function(){return new i(s.curve.n.toArray())},a.prototype._getX=a.prototype.getX,a.prototype.getX=function(){return new i(this._getX().toArray())},a.prototype._getY=a.prototype.getY,a.prototype.getY=function(){return new i(this._getY().toArray())},a.prototype.validate=function(){if(this.isInfinity())throw new Error("Point cannot be equal to Infinity");var t;try{t=u(this.getX(),this.getY().isOdd())}catch(t){throw new Error("Point does not lie on the curve")}if(0!==t.y.cmp(this.y))throw new Error("Invalid y value for curve.");if(!this.mul(a.getN()).isInfinity())throw new Error("Point times N must be infinity");return this},a.pointToCompressed=function(t){var e,r=t.getX().toBuffer({size:32}),i=t.getY().toBuffer({size:32});return e=i[i.length-1]%2?Buffer.from([3]):Buffer.from([2]),n.concat([e,r])},t.exports=a},function(t,e,r){"use strict";var i=r(0),n=r(24),s=r(10),o=r(5).sha256sha256,u=function t(e){if(!(this instanceof t))return new t(e);if(Buffer.isBuffer(e)){var r=e;this.fromBuffer(r)}else if("string"==typeof e){var i=e;this.fromString(i)}else e&&this.set(e)};u.prototype.set=function(t){return this.buf=t.buf||this.buf||void 0,this},u.validChecksum=function(t,e){return i.isString(t)&&(t=new s.Buffer(n.decode(t))),i.isString(e)&&(e=new s.Buffer(n.decode(e))),e||(e=t.slice(-4),t=t.slice(0,-4)),u.checksum(t).toString("hex")===e.toString("hex")},u.decode=function(t){if("string"!=typeof t)throw new Error("Input must be a string");var e=Buffer.from(n.decode(t));if(e.length<4)throw new Error("Input string too short");var r=e.slice(0,-4),i=e.slice(-4),s=o(r).slice(0,4);if(i.toString("hex")!==s.toString("hex"))throw new Error("Checksum mismatch");return r},u.checksum=function(t){return o(t).slice(0,4)},u.encode=function(t){if(!Buffer.isBuffer(t))throw new Error("Input must be a buffer");var e=Buffer.alloc(t.length+4),r=u.checksum(t);return t.copy(e),r.copy(e,t.length),n.encode(e)},u.prototype.fromBuffer=function(t){return this.buf=t,this},u.prototype.fromString=function(t){var e=u.decode(t);return this.buf=e,this},u.prototype.toBuffer=function(){return this.buf},u.prototype.toString=function(){return u.encode(this.buf)},t.exports=u},function(t,e,r){"use strict";var i=r(0),n=r(1),s=r(6),o=r(9),u=r(10),a=r(2),h=r(3),f=r(8),c=r(14),p=r(13);function d(t){return this instanceof d?t?this._fromObject(t):void 0:new d(t)}d.MAXINT=4294967295,d.DEFAULT_SEQNUMBER=4294967295,d.DEFAULT_LOCKTIME_SEQNUMBER=4294967294,d.DEFAULT_RBF_SEQNUMBER=4294967293,Object.defineProperty(d.prototype,"script",{configurable:!1,enumerable:!0,get:function(){return this.isNull()?null:(this._script||(this._script=new f(this._scriptBuffer),this._script._isInput=!0),this._script)}}),d.fromObject=function(t){return n.checkArgument(i.isObject(t)),(new d)._fromObject(t)},d.prototype._fromObject=function(t){var e;if(e=i.isString(t.prevTxId)&&h.isHexa(t.prevTxId)?new u.Buffer(t.prevTxId,"hex"):t.prevTxId,this.witnesses=[],this.output=t.output?t.output instanceof p?t.output:new p(t.output):void 0,this.prevTxId=e||t.txidbuf,this.outputIndex=i.isUndefined(t.outputIndex)?t.txoutnum:t.outputIndex,this.sequenceNumber=i.isUndefined(t.sequenceNumber)?i.isUndefined(t.seqnum)?4294967295:t.seqnum:t.sequenceNumber,i.isUndefined(t.script)&&i.isUndefined(t.scriptBuffer))throw new s.Transaction.Input.MissingScript;return this.setScript(t.scriptBuffer||t.script),this},d.prototype.toObject=d.prototype.toJSON=function(){var t={prevTxId:this.prevTxId.toString("hex"),outputIndex:this.outputIndex,sequenceNumber:this.sequenceNumber,script:this._scriptBuffer.toString("hex")};return this.script&&(t.scriptString=this.script.toString()),this.output&&(t.output=this.output.toObject()),t},d.fromBufferReader=function(t){var e=new d;return e.prevTxId=t.readReverse(32),e.outputIndex=t.readUInt32LE(),e._scriptBuffer=t.readVarLengthBuffer(),e.sequenceNumber=t.readUInt32LE(),e},d.prototype.toBufferWriter=function(t){t||(t=new o),t.writeReverse(this.prevTxId),t.writeUInt32LE(this.outputIndex);var e=this._scriptBuffer;return t.writeVarintNum(e.length),t.write(e),t.writeUInt32LE(this.sequenceNumber),t},d.prototype.setScript=function(t){if(this._script=null,t instanceof f)this._script=t,this._script._isInput=!0,this._scriptBuffer=t.toBuffer();else if(h.isHexa(t))this._scriptBuffer=new u.Buffer(t,"hex");else if(i.isString(t))this._script=new f(t),this._script._isInput=!0,this._scriptBuffer=this._script.toBuffer();else{if(!a.isBuffer(t))throw new TypeError("Invalid argument type: script");this._scriptBuffer=new u.Buffer(t)}return this},d.prototype.getSignatures=function(){throw new s.AbstractMethodInvoked("Trying to sign unsupported output type (only P2PKH and P2SH multisig inputs are supported) for input: "+JSON.stringify(this))},d.prototype.getSatoshisBuffer=function(){return n.checkState(this.output instanceof p),n.checkState(this.output._satoshisBN),(new o).writeUInt64LEBN(this.output._satoshisBN).toBuffer()},d.prototype.isFullySigned=function(){throw new s.AbstractMethodInvoked("Input#isFullySigned")},d.prototype.isFinal=function(){return 4294967295!==this.sequenceNumber},d.prototype.addSignature=function(){throw new s.AbstractMethodInvoked("Input#addSignature")},d.prototype.clearSignatures=function(){throw new s.AbstractMethodInvoked("Input#clearSignatures")},d.prototype.hasWitnesses=function(){return!!(this.witnesses&&this.witnesses.length>0)},d.prototype.getWitnesses=function(){return this.witnesses},d.prototype.setWitnesses=function(t){this.witnesses=t},d.prototype.isValidSignature=function(t,e){return e.signature.nhashtype=e.sigtype,c.verify(t,e.signature,e.publicKey,e.inputIndex,this.output.script)},d.prototype.isNull=function(){return"0000000000000000000000000000000000000000000000000000000000000000"===this.prevTxId.toString("hex")&&4294967295===this.outputIndex},d.prototype._estimateSize=function(){return this.toBufferWriter().toBuffer().length},t.exports=d},function(t,e){t.exports=require("inherits")},function(t,e,r){"use strict";var i=r(0),n=r(1),s=r(20),o=r(2),u=r(3),a=r(11),h=r(6),f=r(7);function c(t){if(!(this instanceof c))return new c(t);if(t instanceof c)return t;if(i.isObject(t))return this._fromObject(t);throw new h.InvalidArgument("TransactionSignatures must be instantiated from an object")}s(c,f),c.prototype._fromObject=function(t){return this._checkObjectArgs(t),this.publicKey=new a(t.publicKey),this.prevTxId=o.isBuffer(t.prevTxId)?t.prevTxId:Buffer.from(t.prevTxId,"hex"),this.outputIndex=t.outputIndex,this.inputIndex=t.inputIndex,this.signature=t.signature instanceof f?t.signature:o.isBuffer(t.signature)?f.fromBuffer(t.signature):f.fromString(t.signature),this.sigtype=t.sigtype,this},c.prototype._checkObjectArgs=function(t){n.checkArgument(a(t.publicKey),"publicKey"),n.checkArgument(!i.isUndefined(t.inputIndex),"inputIndex"),n.checkArgument(!i.isUndefined(t.outputIndex),"outputIndex"),n.checkState(i.isNumber(t.inputIndex),"inputIndex must be a number"),n.checkState(i.isNumber(t.outputIndex),"outputIndex must be a number"),n.checkArgument(t.signature,"signature"),n.checkArgument(t.prevTxId,"prevTxId"),n.checkState(t.signature instanceof f||o.isBuffer(t.signature)||u.isHexa(t.signature),"signature must be a buffer or hexa value"),n.checkState(o.isBuffer(t.prevTxId)||u.isHexa(t.prevTxId),"prevTxId must be a buffer or hexa value"),n.checkArgument(t.sigtype,"sigtype"),n.checkState(i.isNumber(t.sigtype),"sigtype must be a number")},c.prototype.toObject=c.prototype.toJSON=function(){return{publicKey:this.publicKey.toString(),prevTxId:this.prevTxId.toString("hex"),outputIndex:this.outputIndex,inputIndex:this.inputIndex,signature:this.signature.toString(),sigtype:this.sigtype}},c.fromObject=function(t){return n.checkArgument(t),new c(t)},t.exports=c},function(t,e){t.exports=require("assert")},function(t,e,r){"use strict";var i=r(0),n=r(16),s=r(18),o=r(4),u=r(3),a=r(15),h=r(17),f=r(11),c=r(26),p=r(1);function d(t,e){if(!(this instanceof d))return new d(t,e);if(t instanceof d)return t;var r=this._classifyArguments(t,e);if(!r.bn||0===r.bn.cmp(new o(0)))throw new TypeError("Number can not be equal to zero, undefined, null or false");if(!r.bn.lt(h.getN()))throw new TypeError("Number must be less than N");if(void 0===r.network)throw new TypeError('Must specify the network ("livenet" or "testnet")');return u.defineImmutable(this,{bn:r.bn,compressed:r.compressed,network:r.network}),Object.defineProperty(this,"publicKey",{configurable:!1,enumerable:!0,get:this.toPublicKey.bind(this)}),this}d.prototype._classifyArguments=function(t,e){var r={compressed:!0,network:e?a.get(e):a.defaultNetwork};if(i.isUndefined(t)||i.isNull(t))r.bn=d._getRandomBN();else if(t instanceof o)r.bn=t;else if(t instanceof Buffer||t instanceof Uint8Array)r=d._transformBuffer(t,e);else if(t.bn&&t.network)r=d._transformObject(t);else if(!e&&a.get(t))r.bn=d._getRandomBN(),r.network=a.get(t);else{if("string"!=typeof t)throw new TypeError("First argument is an unrecognized data type.");u.isHexa(t)?r.bn=new o(Buffer.from(t,"hex")):r=d._transformWIF(t,e)}return r},d._getRandomBN=function(){var t,e;do{var r=c.getRandomBuffer(32);t=(e=o.fromBuffer(r)).lt(h.getN())}while(!t);return e},d._transformBuffer=function(t,e){var r={};if(32===t.length)return d._transformBNBuffer(t,e);if(r.network=a.get(t[0],"privatekey"),!r.network)throw new Error("Invalid network");if(e&&r.network!==a.get(e))throw new TypeError("Private key network mismatch");if(34===t.length&&1===t[33])r.compressed=!0;else{if(33!==t.length)throw new Error("Length of buffer must be 33 (uncompressed) or 34 (compressed)");r.compressed=!1}return r.bn=o.fromBuffer(t.slice(1,33)),r},d._transformBNBuffer=function(t,e){var r={};return r.network=a.get(e)||a.defaultNetwork,r.bn=o.fromBuffer(t),r.compressed=!1,r},d._transformWIF=function(t,e){return d._transformBuffer(s.decode(t),e)},d.fromBuffer=function(t,e){return new d(t,e)},d._transformObject=function(t){return{bn:new o(t.bn,"hex"),network:a.get(t.network),compressed:t.compressed}},d.fromString=d.fromWIF=function(t){return p.checkArgument(i.isString(t),"First argument is expected to be a string."),new d(t)},d.fromObject=function(t){return p.checkArgument(i.isObject(t),"First argument is expected to be an object."),new d(t)},d.fromRandom=function(t){return new d(d._getRandomBN(),t)},d.getValidationError=function(t,e){var r;try{new d(t,e)}catch(t){r=t}return r},d.isValid=function(t,e){return!!t&&!d.getValidationError(t,e)},d.prototype.toString=function(){return this.toBuffer().toString("hex")},d.prototype.toWIF=function(){var t,e=this.network;return t=this.compressed?Buffer.concat([Buffer.from([e.privatekey]),this.bn.toBuffer({size:32}),Buffer.from([1])]):Buffer.concat([Buffer.from([e.privatekey]),this.bn.toBuffer({size:32})]),s.encode(t)},d.prototype.toBigNumber=function(){return this.bn},d.prototype.toBuffer=function(){return this.bn.toBuffer()},d.prototype.toBufferNoPadding=function(){return this.bn.toBuffer()},d.prototype.toPublicKey=function(){return this._pubkey||(this._pubkey=f.fromPrivateKey(this)),this._pubkey},d.prototype.toAddress=function(t){var e=this.toPublicKey();return n.fromPublicKey(e,t||this.network)},d.prototype.toObject=d.prototype.toJSON=function(){return{bn:this.bn.toString("hex"),compressed:this.compressed,network:this.network.toString()}},d.prototype.inspect=function(){var t=this.compressed?"":", uncompressed";return"<PrivateKey: "+this.toString()+", network: "+this.network+t+">"},t.exports=d},function(t,e,r){"use strict";var i=r(0),n=r(37),s=r(10),o="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz".split(""),u=function t(e){if(!(this instanceof t))return new t(e);if(Buffer.isBuffer(e)){var r=e;this.fromBuffer(r)}else if("string"==typeof e){var i=e;this.fromString(i)}else e&&this.set(e)};u.validCharacters=function(t){return s.Buffer.isBuffer(t)&&(t=t.toString()),i.every(i.map(t,function(t){return i.includes(o,t)}))},u.prototype.set=function(t){return this.buf=t.buf||this.buf||void 0,this},u.encode=function(t){if(!s.Buffer.isBuffer(t))throw new Error("Input should be a buffer");return n.encode(t)},u.decode=function(t){if("string"!=typeof t)throw new Error("Input should be a string");return Buffer.from(n.decode(t))},u.prototype.fromBuffer=function(t){return this.buf=t,this},u.prototype.fromString=function(t){var e=u.decode(t);return this.buf=e,this},u.prototype.toBuffer=function(){return this.buf},u.prototype.toString=function(){return u.encode(this.buf)},t.exports=u},function(t,e,r){t.exports=r(30),t.exports.Input=r(31),t.exports.Output=r(13),t.exports.UnspentOutput=r(39),t.exports.Signature=r(21),t.exports.Sighash=r(14),t.exports.SighashWitness=r(32)},function(t,e,r){"use strict";function i(){}i.getRandomBuffer=function(t){return process.browser?i.getRandomBufferBrowser(t):i.getRandomBufferNode(t)},i.getRandomBufferNode=function(t){return r(36).randomBytes(t)},i.getRandomBufferBrowser=function(t){if(!window.crypto&&!window.msCrypto)throw new Error("window.crypto not available");if(window.crypto&&window.crypto.getRandomValues)var e=window.crypto;else{if(!window.msCrypto||!window.msCrypto.getRandomValues)throw new Error("window.crypto.getRandomValues not available");e=window.msCrypto}var r=new Uint8Array(t);return e.getRandomValues(r),Buffer.from(r)},i.getPseudoRandomBuffer=function(t){for(var e,r=Buffer.alloc(t),i=0;i<=t;i++){0===i-4*Math.floor(i/4)?(e=4294967296*Math.random(),r[i]=255&e):r[i]=255&(e>>>=8)}return r},t.exports=i},function(t,e,r){"use strict";var i=r(0),n=r(4),s=r(2),o=r(12),u=r(9),a=r(5),h=(r(3),r(1)),f=function t(e){if(!(this instanceof t))return new t(e);var r=t._from(e);return this.version=r.version,this.prevHash=r.prevHash,this.merkleRoot=r.merkleRoot,this.time=r.time,this.timestamp=r.time,this.bits=r.bits,this.nonce=r.nonce,r.hash&&h.checkState(this.hash===r.hash,"Argument object hash property does not match block hash."),this};f._from=function(t){var e={};if(s.isBuffer(t))e=f._fromBufferReader(o(t));else{if(!i.isObject(t))throw new TypeError("Unrecognized argument for BlockHeader");e=f._fromObject(t)}return e},f._fromObject=function(t){h.checkArgument(t,"data is required");var e=t.prevHash,r=t.merkleRoot;return i.isString(t.prevHash)&&(e=s.reverse(Buffer.from(t.prevHash,"hex"))),i.isString(t.merkleRoot)&&(r=s.reverse(Buffer.from(t.merkleRoot,"hex"))),{hash:t.hash,version:t.version,prevHash:e,merkleRoot:r,time:t.time,timestamp:t.time,bits:t.bits,nonce:t.nonce}},f.fromObject=function(t){var e=f._fromObject(t);return new f(e)},f.fromRawBlock=function(t){s.isBuffer(t)||(t=Buffer.from(t,"binary"));var e=o(t);e.pos=f.Constants.START_OF_HEADER;var r=f._fromBufferReader(e);return new f(r)},f.fromBuffer=function(t){var e=f._fromBufferReader(o(t));return new f(e)},f.fromString=function(t){var e=Buffer.from(t,"hex");return f.fromBuffer(e)},f._fromBufferReader=function(t){var e={};return e.version=t.readInt32LE(),e.prevHash=t.read(32),e.merkleRoot=t.read(32),e.time=t.readUInt32LE(),e.bits=t.readUInt32LE(),e.nonce=t.readUInt32LE(),e},f.fromBufferReader=function(t){var e=f._fromBufferReader(t);return new f(e)},f.prototype.toObject=f.prototype.toJSON=function(){return{hash:this.hash,version:this.version,prevHash:s.reverse(this.prevHash).toString("hex"),merkleRoot:s.reverse(this.merkleRoot).toString("hex"),time:this.time,bits:this.bits,nonce:this.nonce}},f.prototype.toBuffer=function(){return this.toBufferWriter().concat()},f.prototype.toString=function(){return this.toBuffer().toString("hex")},f.prototype.toBufferWriter=function(t){return t||(t=new u),t.writeInt32LE(this.version),t.write(this.prevHash),t.write(this.merkleRoot),t.writeUInt32LE(this.time),t.writeUInt32LE(this.bits),t.writeUInt32LE(this.nonce),t},f.prototype.getTargetDifficulty=function(t){t=t||this.bits;for(var e=new n(16777215&t),r=8*((t>>>24)-3);r-- >0;)e=e.mul(new n(2));return e},f.prototype.getDifficulty=function(){var t=this.getTargetDifficulty(486604799).mul(new n(Math.pow(10,8))),e=this.getTargetDifficulty(),r=t.div(e).toString(10),i=r.length-8;return r=r.slice(0,i)+"."+r.slice(i),parseFloat(r)},f.prototype._getHash=function(){var t=this.toBuffer();return a.sha256sha256(t)};var c={configurable:!1,enumerable:!0,get:function(){return this._id||(this._id=o(this._getHash()).readReverse().toString("hex")),this._id},set:i.noop};Object.defineProperty(f.prototype,"id",c),Object.defineProperty(f.prototype,"hash",c),f.prototype.validTimestamp=function(){var t=Math.round((new Date).getTime()/1e3);return!(this.time>t+f.Constants.MAX_TIME_OFFSET)},f.prototype.validProofOfWork=function(){var t=new n(this.id,"hex"),e=this.getTargetDifficulty();return!(t.cmp(e)>0)},f.prototype.inspect=function(){return"<BlockHeader "+this.id+">"},f.Constants={START_OF_HEADER:8,MAX_TIME_OFFSET:7200,LARGEST_HASH:new n("10000000000000000000000000000000000000000000000000000000000000000","hex")},t.exports=f},function(t,e,r){"use strict";var i=r(4),n=r(17),s=r(7),o=r(11),u=r(26),a=r(5),h=r(2),f=r(0),c=r(1),p=function t(e){if(!(this instanceof t))return new t(e);e&&this.set(e)};p.prototype.set=function(t){return this.hashbuf=t.hashbuf||this.hashbuf,this.endian=t.endian||this.endian,this.privkey=t.privkey||this.privkey,this.pubkey=t.pubkey||(this.privkey?this.privkey.publicKey:this.pubkey),this.sig=t.sig||this.sig,this.k=t.k||this.k,this.verified=t.verified||this.verified,this},p.prototype.privkey2pubkey=function(){this.pubkey=this.privkey.toPublicKey()},p.prototype.calci=function(){for(var t=0;t<4;t++){var e;this.sig.i=t;try{e=this.toPublicKey()}catch(t){console.error(t);continue}if(e.point.eq(this.pubkey.point))return this.sig.compressed=this.pubkey.compressed,this}throw this.sig.i=void 0,new Error("Unable to find valid recovery factor")},p.fromString=function(t){var e=JSON.parse(t);return new p(e)},p.prototype.randomK=function(){var t,e=n.getN();do{t=i.fromBuffer(u.getRandomBuffer(32))}while(!t.lt(e)||!t.gt(i.Zero));return this.k=t,this},p.prototype.deterministicK=function(t){f.isUndefined(t)&&(t=0);var e=Buffer.alloc(32);e.fill(1);var r=Buffer.alloc(32);r.fill(0);var s=this.privkey.bn.toBuffer({size:32}),o="little"===this.endian?h.reverse(this.hashbuf):this.hashbuf;r=a.sha256hmac(Buffer.concat([e,Buffer.from([0]),s,o]),r),e=a.sha256hmac(e,r),r=a.sha256hmac(Buffer.concat([e,Buffer.from([1]),s,o]),r),e=a.sha256hmac(e,r),e=a.sha256hmac(e,r);for(var u=i.fromBuffer(e),c=n.getN(),p=0;p<t||!u.lt(c)||!u.gt(i.Zero);p++)r=a.sha256hmac(Buffer.concat([e,Buffer.from([0])]),r),e=a.sha256hmac(e,r),e=a.sha256hmac(e,r),u=i.fromBuffer(e);return this.k=u,this},p.prototype.toPublicKey=function(){var t=this.sig.i;c.checkArgument(0===t||1===t||2===t||3===t,new Error("i must be equal to 0, 1, 2, or 3"));var e=i.fromBuffer(this.hashbuf),r=this.sig.r,s=this.sig.s,u=1&t,a=t>>1,h=n.getN(),f=n.getG(),p=a?r.add(h):r,d=n.fromX(u,p);if(!d.mul(h).isInfinity())throw new Error("nR is not a valid curve point");var l=e.neg().umod(h),g=r.invm(h),m=d.mul(s).add(f.mul(l)).mul(g);return o.fromPoint(m,this.sig.compressed)},p.prototype.sigError=function(){if(!h.isBuffer(this.hashbuf)||32!==this.hashbuf.length)return"hashbuf must be a 32 byte buffer";var t=this.sig.r,e=this.sig.s;if(!(t.gt(i.Zero)&&t.lt(n.getN())&&e.gt(i.Zero)&&e.lt(n.getN())))return"r and s not in range";var r=i.fromBuffer(this.hashbuf,this.endian?{endian:this.endian}:void 0),s=n.getN(),o=e.invm(s),u=o.mul(r).umod(s),a=o.mul(t).umod(s),f=n.getG().mulAdd(u,this.pubkey.point,a);return f.isInfinity()?"p is infinity":0!==f.getX().umod(s).cmp(t)&&"Invalid signature"},p.toLowS=function(t){return t.gt(i.fromBuffer(Buffer.from("7FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF5D576E7357A4501DDFE92F46681B20A0","hex")))&&(t=n.getN().sub(t)),t},p.prototype._findSignature=function(t,e){var r,s,o,u=n.getN(),a=n.getG(),h=0;do{(!this.k||h>0)&&this.deterministicK(h),h++,r=this.k,s=a.mul(r).x.umod(u),o=r.invm(u).mul(e.add(t.mul(s))).umod(u)}while(s.cmp(i.Zero)<=0||o.cmp(i.Zero)<=0);return{s:o=p.toLowS(o),r:s}},p.prototype.sign=function(){var t=this.hashbuf,e=this.privkey,r=e.bn;c.checkState(t&&e&&r,new Error("invalid parameters")),c.checkState(h.isBuffer(t)&&32===t.length,new Error("hashbuf must be a 32 byte buffer"));var n=i.fromBuffer(t,this.endian?{endian:this.endian}:void 0),o=this._findSignature(r,n);return o.compressed=this.pubkey.compressed,this.sig=new s(o),this},p.prototype.signRandomK=function(){return this.randomK(),this.sign()},p.prototype.toString=function(){var t={};return this.hashbuf&&(t.hashbuf=this.hashbuf.toString("hex")),this.privkey&&(t.privkey=this.privkey.toString()),this.pubkey&&(t.pubkey=this.pubkey.toString()),this.sig&&(t.sig=this.sig.toString()),this.k&&(t.k=this.k.toString()),JSON.stringify(t)},p.prototype.verify=function(){return this.sigError()?this.verified=!1:this.verified=!0,this},p.sign=function(t,e,r){return p().set({hashbuf:t,endian:r,privkey:e}).sign().sig},p.verify=function(t,e,r,i){return p().set({hashbuf:t,endian:i,sig:e,pubkey:r}).verify().verified},t.exports=p},function(t,e,r){"use strict";var i=r(0),n=r(1),s=r(2),o=r(3);function u(t){if(!(this instanceof u))return new u(t);var e;if(i.isNumber(t))e=t;else{if(!i.isString(t))throw new TypeError('Unrecognized num type: "'+typeof t+'" for Opcode');e=u.map[t]}return o.defineImmutable(this,{num:e}),this}for(var a in u.fromBuffer=function(t){return n.checkArgument(s.isBuffer(t)),new u(Number("0x"+t.toString("hex")))},u.fromNumber=function(t){return n.checkArgument(i.isNumber(t)),new u(t)},u.fromString=function(t){n.checkArgument(i.isString(t));var e=u.map[t];if(void 0===e)throw new TypeError("Invalid opcodestr");return new u(e)},u.prototype.toHex=function(){return this.num.toString(16)},u.prototype.toBuffer=function(){return Buffer.from(this.toHex(),"hex")},u.prototype.toNumber=function(){return this.num},u.prototype.toString=function(){var t=u.reverseMap[this.num];if(void 0===t)throw new Error("Opcode does not have a string representation");return t},u.smallInt=function(t){return n.checkArgument(i.isNumber(t),"Invalid Argument: n should be number"),n.checkArgument(t>=0&&t<=16,"Invalid Argument: n must be between 0 and 16"),0===t?u("OP_0"):new u(u.map.OP_1+t-1)},u.map={OP_FALSE:0,OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_TRUE:81,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SUBSTR:127,OP_LEFT:128,OP_RIGHT:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_CHECKLOCKTIMEVERIFY:177,OP_NOP1:176,OP_NOP2:177,OP_NOP3:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_PUBKEYHASH:253,OP_PUBKEY:254,OP_INVALIDOPCODE:255},u.reverseMap=[],u.map)u.reverseMap[u.map[a]]=a;i.extend(u,u.map),u.isSmallIntOp=function(t){return t instanceof u&&(t=t.toNumber()),t===u.map.OP_0||t>=u.map.OP_1&&t<=u.map.OP_16},u.prototype.inspect=function(){return"<Opcode: "+this.toString()+", hex: "+this.toHex()+", decimal: "+this.num+">"},t.exports=u},function(t,e,r){"use strict";var i=r(0),n=r(1),s=r(10),o=Buffer.compare||r(48),u=r(6),a=r(2),h=r(3),f=r(12),c=r(9),p=r(5),d=r(7),l=r(14),g=r(32),m=r(16),y=r(39),_=r(31),S=_.PublicKeyHash,b=_.PublicKey,v=_.MultiSigScriptHash,k=_.MultiSig,I=r(13),P=r(8),O=r(23),E=r(4);function w(t){if(!(this instanceof w))return new w(t);if(this.inputs=[],this.outputs=[],this._inputAmount=void 0,this._outputAmount=void 0,t){if(t instanceof w)return w.shallowCopy(t);if(h.isHexa(t))this.fromString(t);else if(a.isBuffer(t))this.fromBuffer(t);else{if(!i.isObject(t))throw new u.InvalidArgument("Must provide an object or string to deserialize a transaction");this.fromObject(t)}}else this._newTransaction()}w.DUST_AMOUNT=546,w.FEE_SECURITY_MARGIN=150,w.MAX_MONEY=21e14,w.NLOCKTIME_BLOCKHEIGHT_LIMIT=5e8,w.NLOCKTIME_MAX_VALUE=4294967295,w.FEE_PER_KB=1e5,w.CHANGE_OUTPUT_MAX_SIZE=62,w.MAXIMUM_EXTRA_SIZE=26,w.shallowCopy=function(t){return new w(t.toBuffer())};var B={configurable:!1,enumerable:!0,get:function(){return this._hash=new f(this._getHash()).readReverse().toString("hex"),this._hash}},A={configurable:!1,enumerable:!0,get:function(){return new f(this._getWitnessHash()).readReverse().toString("hex")}};Object.defineProperty(w.prototype,"witnessHash",A),Object.defineProperty(w.prototype,"hash",B),Object.defineProperty(w.prototype,"id",B);var T={configurable:!1,enumerable:!0,get:function(){return this._getInputAmount()}};Object.defineProperty(w.prototype,"inputAmount",T),T.get=function(){return this._getOutputAmount()},Object.defineProperty(w.prototype,"outputAmount",T),w.prototype._getHash=function(){return p.sha256sha256(this.toBuffer(!0))},w.prototype._getWitnessHash=function(){return p.sha256sha256(this.toBuffer(!1))},w.prototype.serialize=function(t){return!0===t||t&&t.disableAll?this.uncheckedSerialize():this.checkedSerialize(t)},w.prototype.uncheckedSerialize=w.prototype.toString=function(){return this.toBuffer().toString("hex")},w.prototype.checkedSerialize=function(t){var e=this.getSerializationError(t);if(e)throw e.message+=" - For more information please see: https://bitcore.io/api/lib/transaction#serialization-checks",e;return this.uncheckedSerialize()},w.prototype.invalidSatoshis=function(){for(var t=!1,e=0;e<this.outputs.length;e++)this.outputs[e].invalidSatoshis()&&(t=!0);return t},w.prototype.getSerializationError=function(t){if(t=t||{},this.invalidSatoshis())return new u.Transaction.InvalidSatoshis;var e,r=this._getUnspentValue();return r<0?t.disableMoreOutputThanInput||(e=new u.Transaction.InvalidOutputAmountSum):e=this._hasFeeError(t,r),e||this._hasDustOutputs(t)||this._isMissingSignatures(t)},w.prototype._hasFeeError=function(t,e){if(!i.isUndefined(this._fee)&&this._fee!==e)return new u.Transaction.FeeError.Different("Unspent value is "+e+" but specified fee is "+this._fee);if(!t.disableLargeFees){var r=Math.floor(w.FEE_SECURITY_MARGIN*this._estimateFee());if(e>r)return this._missingChange()?new u.Transaction.ChangeAddressMissing("Fee is too large and no change address was provided"):new u.Transaction.FeeError.TooLarge("expected less than "+r+" but got "+e)}if(!t.disableSmallFees){var n=Math.ceil(this._estimateFee()/w.FEE_SECURITY_MARGIN);if(e<n)return new u.Transaction.FeeError.TooSmall("expected more than "+n+" but got "+e)}},w.prototype._missingChange=function(){return!this._changeScript},w.prototype._hasDustOutputs=function(t){var e,r;if(!t.disableDustOutputs)for(e in this.outputs)if((r=this.outputs[e]).satoshis<w.DUST_AMOUNT&&!r.script.isDataOut())return new u.Transaction.DustOutputs},w.prototype._isMissingSignatures=function(t){if(!t.disableIsFullySigned)return this.isFullySigned()?void 0:new u.Transaction.MissingSignatures},w.prototype.inspect=function(){return"<Transaction: "+this.uncheckedSerialize()+">"},w.prototype.toBuffer=function(t){var e=new c;return this.toBufferWriter(e,t).toBuffer()},w.prototype.hasWitnesses=function(){for(var t=0;t<this.inputs.length;t++)if(this.inputs[t].hasWitnesses())return!0;return!1},w.prototype.toBufferWriter=function(t,e){t.writeInt32LE(this.version);var r=this.hasWitnesses();return r&&!e&&t.write(new Buffer("0001","hex")),t.writeVarintNum(this.inputs.length),i.each(this.inputs,function(e){e.toBufferWriter(t)}),t.writeVarintNum(this.outputs.length),i.each(this.outputs,function(e){e.toBufferWriter(t)}),r&&!e&&i.each(this.inputs,function(e){var r=e.getWitnesses();t.writeVarintNum(r.length);for(var i=0;i<r.length;i++)t.writeVarintNum(r[i].length),t.write(r[i])}),t.writeUInt32LE(this.nLockTime),t},w.prototype.fromBuffer=function(t){var e=new f(t);return this.fromBufferReader(e)},w.prototype.fromBufferReader=function(t){n.checkArgument(!t.finished(),"No transaction data received"),this.version=t.readInt32LE();var e=t.readVarintNum(),r=!1;0===e&&0!==t.buf[t.pos]&&(t.pos+=1,r=!0,e=t.readVarintNum());for(var i=0;i<e;i++){var s=_.fromBufferReader(t);this.inputs.push(s)}for(var o=t.readVarintNum(),u=0;u<o;u++)this.outputs.push(I.fromBufferReader(t));if(r)for(var a=0;a<e;a++){for(var h=t.readVarintNum(),f=[],c=0;c<h;c++){var p=t.readVarintNum(),d=t.read(p);f.push(d)}this.inputs[a].setWitnesses(f)}return this.nLockTime=t.readUInt32LE(),this},w.prototype.toObject=w.prototype.toJSON=function(){var t=[];this.inputs.forEach(function(e){t.push(e.toObject())});var e=[];this.outputs.forEach(function(t){e.push(t.toObject())});var r={hash:this.hash,version:this.version,inputs:t,outputs:e,nLockTime:this.nLockTime};return this._changeScript&&(r.changeScript=this._changeScript.toString()),i.isUndefined(this._changeIndex)||(r.changeIndex=this._changeIndex),i.isUndefined(this._fee)||(r.fee=this._fee),r},w.prototype.fromObject=function(t){n.checkArgument(i.isObject(t)||t instanceof w);var e,r=this;return e=t instanceof w?e.toObject():t,i.each(e.inputs,function(t){if(t.output&&t.output.script){var e,i=new P(t.output.script);if(i.isPublicKeyHashOut())e=new _.PublicKeyHash(t);else if(i.isScriptHashOut()&&t.publicKeys&&t.threshold)e=new _.MultiSigScriptHash(t,t.publicKeys,t.threshold,t.signatures);else{if(!i.isPublicKeyOut())throw new u.Transaction.Input.UnsupportedScript(t.output.script);e=new _.PublicKey(t)}r.addInput(e)}else r.uncheckedAddInput(new _(t))}),i.each(e.outputs,function(t){r.addOutput(new I(t))}),e.changeIndex&&(this._changeIndex=e.changeIndex),e.changeScript&&(this._changeScript=new P(e.changeScript)),e.fee&&(this._fee=e.fee),this.nLockTime=e.nLockTime,this.version=e.version,this._checkConsistency(t),this},w.prototype._checkConsistency=function(t){i.isUndefined(this._changeIndex)||(n.checkState(this._changeScript,"Change script is expected."),n.checkState(this.outputs[this._changeIndex],"Change index points to undefined output."),n.checkState(this.outputs[this._changeIndex].script.toString()===this._changeScript.toString(),"Change output has an unexpected script.")),t&&t.hash&&n.checkState(t.hash===this.hash,"Hash in object does not match transaction hash.")},w.prototype.lockUntilDate=function(t){if(n.checkArgument(t),i.isNumber(t)&&t<w.NLOCKTIME_BLOCKHEIGHT_LIMIT)throw new u.Transaction.LockTimeTooEarly;i.isDate(t)&&(t=t.getTime()/1e3);for(var e=0;e<this.inputs.length;e++)this.inputs[e].sequenceNumber===_.DEFAULT_SEQNUMBER&&(this.inputs[e].sequenceNumber=_.DEFAULT_LOCKTIME_SEQNUMBER);return this.nLockTime=t,this},w.prototype.lockUntilBlockHeight=function(t){if(n.checkArgument(i.isNumber(t)),t>=w.NLOCKTIME_BLOCKHEIGHT_LIMIT)throw new u.Transaction.BlockHeightTooHigh;if(t<0)throw new u.Transaction.NLockTimeOutOfRange;for(var e=0;e<this.inputs.length;e++)this.inputs[e].sequenceNumber===_.DEFAULT_SEQNUMBER&&(this.inputs[e].sequenceNumber=_.DEFAULT_LOCKTIME_SEQNUMBER);return this.nLockTime=t,this},w.prototype.getLockTime=function(){return this.nLockTime?this.nLockTime<w.NLOCKTIME_BLOCKHEIGHT_LIMIT?this.nLockTime:new Date(1e3*this.nLockTime):null},w.prototype.fromString=function(t){this.fromBuffer(s.Buffer.from(t,"hex"))},w.prototype._newTransaction=function(){this.version=1,this.nLockTime=0},w.prototype.from=function(t,e,r,n){if(i.isArray(t)){var s=this;return i.each(t,function(t){s.from(t,e,r)}),this}return i.some(this.inputs,function(e){return e.prevTxId.toString("hex")===t.txId&&e.outputIndex===t.outputIndex})?this:(e&&r?this._fromMultisigUtxo(t,e,r,n):this._fromNonP2SH(t),this)},w.prototype._fromNonP2SH=function(t){var e;e=(t=new y(t)).script.isPublicKeyHashOut()?S:t.script.isPublicKeyOut()?b:_,this.addInput(new e({output:new I({script:t.script,satoshis:t.satoshis}),prevTxId:t.txId,outputIndex:t.outputIndex,script:P.empty()}))},w.prototype._fromMultisigUtxo=function(t,e,r,i){var s;if(n.checkArgument(r<=e.length,"Number of required signatures must be greater than the number of public keys"),(t=new y(t)).script.isMultisigOut())s=k;else{if(!t.script.isScriptHashOut())throw new Error("@TODO");s=v}this.addInput(new s({output:new I({script:t.script,satoshis:t.satoshis}),prevTxId:t.txId,outputIndex:t.outputIndex,script:P.empty()},e,r,!1,i))},w.prototype.addInput=function(t,e,r){if(n.checkArgumentType(t,_,"input"),!t.output&&(i.isUndefined(e)||i.isUndefined(r)))throw new u.Transaction.NeedMoreInfo("Need information about the UTXO script and satoshis");return t.output||!e||i.isUndefined(r)||(e=e instanceof P?e:new P(e),n.checkArgumentType(r,"number","satoshis"),t.output=new I({script:e,satoshis:r})),this.uncheckedAddInput(t)},w.prototype.uncheckedAddInput=function(t){return n.checkArgumentType(t,_,"input"),this.inputs.push(t),this._inputAmount=void 0,this._updateChangeOutput(),this},w.prototype.hasAllUtxoInfo=function(){return i.every(this.inputs.map(function(t){return!!t.output}))},w.prototype.fee=function(t){return n.checkArgument(i.isNumber(t),"amount must be a number"),this._fee=t,this._updateChangeOutput(),this},w.prototype.feePerKb=function(t){return n.checkArgument(i.isNumber(t),"amount must be a number"),this._feePerKb=t,this._updateChangeOutput(),this},w.prototype.change=function(t){return n.checkArgument(t,"address is required"),this._changeScript=P.fromAddress(t),this._updateChangeOutput(),this},w.prototype.getChangeOutput=function(){return i.isUndefined(this._changeIndex)?null:this.outputs[this._changeIndex]},w.prototype.to=function(t,e){if(i.isArray(t)){var r=this;return i.each(t,function(t){r.to(t.address,t.satoshis)}),this}return n.checkArgument(h.isNaturalNumber(e),"Amount is expected to be a positive integer"),this.addOutput(new I({script:P(new m(t)),satoshis:e})),this},w.prototype.addData=function(t){return this.addOutput(new I({script:P.buildDataOut(t),satoshis:0})),this},w.prototype.addOutput=function(t){return n.checkArgumentType(t,I,"output"),this._addOutput(t),this._updateChangeOutput(),this},w.prototype.clearOutputs=function(){return this.outputs=[],this._clearSignatures(),this._outputAmount=void 0,this._changeIndex=void 0,this._updateChangeOutput(),this},w.prototype._addOutput=function(t){this.outputs.push(t),this._outputAmount=void 0},w.prototype._getOutputAmount=function(){if(i.isUndefined(this._outputAmount)){var t=this;this._outputAmount=0,i.each(this.outputs,function(e){t._outputAmount+=e.satoshis})}return this._outputAmount},w.prototype._getInputAmount=function(){if(i.isUndefined(this._inputAmount)){var t=this;this._inputAmount=0,i.each(this.inputs,function(e){if(i.isUndefined(e.output))throw new u.Transaction.Input.MissingPreviousOutput;t._inputAmount+=e.output.satoshis})}return this._inputAmount},w.prototype._updateChangeOutput=function(){if(this._changeScript){this._clearSignatures(),i.isUndefined(this._changeIndex)||this._removeOutput(this._changeIndex);var t=this._getUnspentValue()-this.getFee();t>0?(this._changeIndex=this.outputs.length,this._addOutput(new I({script:this._changeScript,satoshis:t}))):this._changeIndex=void 0}},w.prototype.getFee=function(){return this.isCoinbase()?0:i.isUndefined(this._fee)?this._changeScript?this._estimateFee():this._getUnspentValue():this._fee},w.prototype._estimateFee=function(){var t=this._estimateSize(),e=this._getUnspentValue();return w._estimateFee(t,e,this._feePerKb)},w.prototype._getUnspentValue=function(){return this._getInputAmount()-this._getOutputAmount()},w.prototype._clearSignatures=function(){i.each(this.inputs,function(t){t.clearSignatures()})},w._estimateFee=function(t,e,r){return e>Math.ceil(t/1e3)*(r||w.FEE_PER_KB)&&(t+=w.CHANGE_OUTPUT_MAX_SIZE),Math.ceil(t/1e3)*(r||w.FEE_PER_KB)},w.prototype._estimateSize=function(){var t=w.MAXIMUM_EXTRA_SIZE;return i.each(this.inputs,function(e){t+=e._estimateSize()}),i.each(this.outputs,function(e){t+=e.script.toBuffer().length+9}),t},w.prototype._removeOutput=function(t){var e=this.outputs[t];this.outputs=i.without(this.outputs,e),this._outputAmount=void 0},w.prototype.removeOutput=function(t){this._removeOutput(t),this._updateChangeOutput()},w.prototype.sort=function(){return this.sortInputs(function(t){var e=Array.prototype.concat.apply([],t);return e.sort(function(t,e){return o(t.prevTxId,e.prevTxId)||t.outputIndex-e.outputIndex}),e}),this.sortOutputs(function(t){var e=Array.prototype.concat.apply([],t);return e.sort(function(t,e){return t.satoshis-e.satoshis||o(t.script.toBuffer(),e.script.toBuffer())}),e}),this},w.prototype.shuffleOutputs=function(){return this.sortOutputs(i.shuffle)},w.prototype.sortOutputs=function(t){var e=t(this.outputs);return this._newOutputOrder(e)},w.prototype.sortInputs=function(t){return this.inputs=t(this.inputs),this._clearSignatures(),this},w.prototype._newOutputOrder=function(t){if(this.outputs.length!==t.length||0!==i.difference(this.outputs,t).length)throw new u.Transaction.InvalidSorting;if(!i.isUndefined(this._changeIndex)){var e=this.outputs[this._changeIndex];this._changeIndex=i.findIndex(t,e)}return this.outputs=t,this},w.prototype.removeInput=function(t,e){var r;if((r=!e&&i.isNumber(t)?t:i.findIndex(this.inputs,function(r){return r.prevTxId.toString("hex")===t&&r.outputIndex===e}))<0||r>=this.inputs.length)throw new u.Transaction.InvalidIndex(r,this.inputs.length);var n=this.inputs[r];this.inputs=i.without(this.inputs,n),this._inputAmount=void 0,this._updateChangeOutput()},w.prototype.sign=function(t,e){n.checkState(this.hasAllUtxoInfo(),"Not all utxo information is available to sign the transaction.");var r=this;return i.isArray(t)?(i.each(t,function(t){r.sign(t,e)}),this):(i.each(this.getSignatures(t,e),function(t){r.applySignature(t)}),this)},w.prototype.getSignatures=function(t,e){t=new O(t),e=e||d.SIGHASH_ALL;var r=this,n=[],s=p.sha256ripemd160(t.publicKey.toBuffer());return i.each(this.inputs,function(o,u){i.each(o.getSignatures(r,t,u,e,s),function(t){n.push(t)})}),n},w.prototype.applySignature=function(t){return this.inputs[t.inputIndex].addSignature(this,t),this},w.prototype.isFullySigned=function(){return i.each(this.inputs,function(t){if(t.isFullySigned===_.prototype.isFullySigned)throw new u.Transaction.UnableToVerifySignature("Unrecognized script kind, or not enough information to execute script.This usually happens when creating a transaction from a serialized transaction")}),i.every(i.map(this.inputs,function(t){return t.isFullySigned()}))},w.prototype.isValidSignature=function(t){if(this.inputs[t.inputIndex].isValidSignature===_.prototype.isValidSignature)throw new u.Transaction.UnableToVerifySignature("Unrecognized script kind, or not enough information to execute script.This usually happens when creating a transaction from a serialized transaction");return this.inputs[t.inputIndex].isValidSignature(this,t)},w.prototype.verifySignature=function(t,e,r,s,o,u){if(i.isUndefined(o)&&(o=0),1===o){var a,f=s.toBuffer(),p=new c;return p.writeVarintNum(f.length),p.write(f),u?(n.checkState(h.isNaturalNumber(u)),a=(new c).writeUInt64LEBN(new E(u)).toBuffer()):a=this.inputs[r].getSatoshisBuffer(),g.verify(this,t,e,r,p.toBuffer(),a)}return l.verify(this,t,e,r,s)},w.prototype.verify=function(){if(0===this.inputs.length)return"transaction txins empty";if(0===this.outputs.length)return"transaction txouts empty";for(var t=new E(0),e=0;e<this.outputs.length;e++){var r=this.outputs[e];if(r.invalidSatoshis())return"transaction txout "+e+" satoshis is invalid";if(r._satoshisBN.gt(new E(w.MAX_MONEY,10)))return"transaction txout "+e+" greater than MAX_MONEY";if((t=t.add(r._satoshisBN)).gt(new E(w.MAX_MONEY)))return"transaction txout "+e+" total output greater than MAX_MONEY"}if(this.toBuffer().length>1e6)return"transaction over the maximum block size";var n={};for(e=0;e<this.inputs.length;e++){var s=this.inputs[e],o=s.prevTxId+":"+s.outputIndex;if(!i.isUndefined(n[o]))return"transaction input "+e+" duplicate input";n[o]=!0}if(this.isCoinbase()){var u=this.inputs[0]._scriptBuffer;if(u.length<2||u.length>100)return"coinbase transaction script size invalid"}else for(e=0;e<this.inputs.length;e++)if(this.inputs[e].isNull())return"transaction input "+e+" has null input";return!0},w.prototype.isCoinbase=function(){return 1===this.inputs.length&&this.inputs[0].isNull()},w.prototype.isRBF=function(){for(var t=0;t<this.inputs.length;t++){if(this.inputs[t].sequenceNumber<_.MAXINT-1)return!0}return!1},w.prototype.enableRBF=function(){for(var t=0;t<this.inputs.length;t++){var e=this.inputs[t];e.sequenceNumber>=_.MAXINT-1&&(e.sequenceNumber=_.DEFAULT_RBF_SEQNUMBER)}return this},t.exports=w},function(t,e,r){t.exports=r(19),t.exports.PublicKey=r(49),t.exports.PublicKeyHash=r(50),t.exports.MultiSig=r(51),t.exports.MultiSigScriptHash=r(52)},function(t,e,r){"use strict";var i=r(7),n=(r(8),r(13),r(12)),s=r(9),o=(r(4),r(5)),u=r(28),a=r(1),h=r(0),f=function(t,e,r,u,a){var h,f,c;if(!(e&i.SIGHASH_ANYONECANPAY)){for(var p=[],d=0;d<t.inputs.length;d++){var l=t.inputs[d],g=new n(l.prevTxId).readReverse();p.push(g);var m=new Buffer(new Array(4));m.writeUInt32LE(l.outputIndex,0),p.push(m)}h=o.sha256sha256(Buffer.concat(p))}if(!(e&i.SIGHASH_ANYONECANPAY)&&(31&e)!==i.SIGHASH_SINGLE&&(31&e)!==i.SIGHASH_NONE){for(var y=[],_=0;_<t.inputs.length;_++){var S=new Buffer(new Array(4));S.writeUInt32LE(t.inputs[_].sequenceNumber,0),y.push(S)}f=o.sha256sha256(Buffer.concat(y))}var b=new s;if((31&e)!==i.SIGHASH_SINGLE&&(31&e)!==i.SIGHASH_NONE){for(var v=0;v<t.outputs.length;v++)t.outputs[v].toBufferWriter(b);c=o.sha256sha256(b.toBuffer())}else(31&e)===i.SIGHASH_SINGLE&&r<t.outputs.length&&(t.outputs[r].toBufferWriter(b),c=o.sha256sha256(b.toBuffer()));var k=new s;k.writeUInt32LE(t.version),k.write(h),k.write(f);var I=new n(t.inputs[r].prevTxId).readReverse();return k.write(I),k.writeUInt32LE(t.inputs[r].outputIndex),k.write(u),k.write(a),k.writeUInt32LE(t.inputs[r].sequenceNumber),k.write(c),k.writeUInt32LE(t.nLockTime),k.writeInt32LE(e),o.sha256sha256(k.toBuffer())};t.exports={sighash:f,sign:function(t,e,r,i,n,s){var o=f(t,r,i,n,s);return u.sign(o,e).set({nhashtype:r})},verify:function(t,e,r,i,n,s){a.checkArgument(!h.isUndefined(t)),a.checkArgument(!h.isUndefined(e)&&!h.isUndefined(e.nhashtype));var o=f(t,e.nhashtype,i,n,s);return u.verify(o,e,r)}}},function(t,e,r){"use strict";var i=r(0),n=r(6),s=r(1),o={BTC:[1e8,8],mBTC:[1e5,5],uBTC:[100,2],bits:[100,2],satoshis:[1,0]};function u(t,e){if(!(this instanceof u))return new u(t,e);if(i.isNumber(e)){if(e<=0)throw new n.Unit.InvalidRate(e);t/=e,e=u.BTC}this._value=this._from(t,e);var r=this;Object.keys(o).forEach(function(t){Object.defineProperty(r,t,{get:function(){return r.to(t)},enumerable:!0})})}Object.keys(o).forEach(function(t){u[t]=t}),u.fromObject=function(t){return s.checkArgument(i.isObject(t),"Argument is expected to be an object"),new u(t.amount,t.code)},u.fromBTC=function(t){return new u(t,u.BTC)},u.fromMillis=u.fromMilis=function(t){return new u(t,u.mBTC)},u.fromMicros=u.fromBits=function(t){return new u(t,u.bits)},u.fromSatoshis=function(t){return new u(t,u.satoshis)},u.fromFiat=function(t,e){return new u(t,e)},u.prototype._from=function(t,e){if(!o[e])throw new n.Unit.UnknownCode(e);return parseInt((t*o[e][0]).toFixed())},u.prototype.to=function(t){if(i.isNumber(t)){if(t<=0)throw new n.Unit.InvalidRate(t);return parseFloat((this.BTC*t).toFixed(2))}if(!o[t])throw new n.Unit.UnknownCode(t);var e=this._value/o[t][0];return parseFloat(e.toFixed(o[t][1]))},u.prototype.toBTC=function(){return this.to(u.BTC)},u.prototype.toMillis=u.prototype.toMilis=function(){return this.to(u.mBTC)},u.prototype.toMicros=u.prototype.toBits=function(){return this.to(u.bits)},u.prototype.toSatoshis=function(){return this.to(u.satoshis)},u.prototype.atRate=function(t){return this.to(t)},u.prototype.toString=function(){return this.satoshis+" satoshis"},u.prototype.toObject=u.prototype.toJSON=function(){return{amount:this.BTC,code:u.BTC}},u.prototype.inspect=function(){return"<Unit: "+this.toString()+">"},t.exports=u},function(t,e){t.exports=require("bn.js")},function(t,e){t.exports=require("elliptic")},function(t,e){t.exports=require("crypto")},function(t,e){t.exports=require("bs58")},function(t,e,r){"use strict";var i=r(16),n=r(12),s=r(9),o=r(5),u=r(29),a=r(11),h=r(7),f=r(15),c=r(1),p=r(0),d=r(6),l=r(10),g=r(2),m=r(3),y=function t(e){return this instanceof t?(this.chunks=[],g.isBuffer(e)?t.fromBuffer(e):e instanceof i?t.fromAddress(e):e instanceof t?t.fromBuffer(e.toBuffer()):p.isString(e)?t.fromString(e):void(p.isObject(e)&&p.isArray(e.chunks)&&this.set(e))):new t(e)};y.prototype.set=function(t){return c.checkArgument(p.isObject(t)),c.checkArgument(p.isArray(t.chunks)),this.chunks=t.chunks,this},y.fromBuffer=function(t){var e=new y;e.chunks=[];for(var r=new n(t);!r.finished();)try{var i,s,o=r.readUInt8();o>0&&o<u.OP_PUSHDATA1?(i=o,e.chunks.push({buf:r.read(i),len:i,opcodenum:o})):o===u.OP_PUSHDATA1?(i=r.readUInt8(),s=r.read(i),e.chunks.push({buf:s,len:i,opcodenum:o})):o===u.OP_PUSHDATA2?(i=r.readUInt16LE(),s=r.read(i),e.chunks.push({buf:s,len:i,opcodenum:o})):o===u.OP_PUSHDATA4?(i=r.readUInt32LE(),s=r.read(i),e.chunks.push({buf:s,len:i,opcodenum:o})):e.chunks.push({opcodenum:o})}catch(e){if(e instanceof RangeError)throw new d.Script.InvalidBuffer(t.toString("hex"));throw e}return e},y.prototype.toBuffer=function(){for(var t=new s,e=0;e<this.chunks.length;e++){var r=this.chunks[e],i=r.opcodenum;t.writeUInt8(r.opcodenum),r.buf&&(i<u.OP_PUSHDATA1?t.write(r.buf):i===u.OP_PUSHDATA1?(t.writeUInt8(r.len),t.write(r.buf)):i===u.OP_PUSHDATA2?(t.writeUInt16LE(r.len),t.write(r.buf)):i===u.OP_PUSHDATA4&&(t.writeUInt32LE(r.len),t.write(r.buf)))}return t.concat()},y.fromASM=function(t){var e=new y;e.chunks=[];for(var r=t.split(" "),i=0;i<r.length;){var n=r[i],s=u(n).toNumber();if(p.isUndefined(s)){var o=Buffer.from(r[i],"hex");e.chunks.push({buf:o,len:o.length,opcodenum:o.length}),i+=1}else s===u.OP_PUSHDATA1||s===u.OP_PUSHDATA2||s===u.OP_PUSHDATA4?(e.chunks.push({buf:Buffer.from(r[i+2],"hex"),len:parseInt(r[i+1]),opcodenum:s}),i+=3):(e.chunks.push({opcodenum:s}),i+=1)}return e},y.fromHex=function(t){return new y(new l.Buffer(t,"hex"))},y.fromString=function(t){if(m.isHexa(t)||0===t.length)return new y(new l.Buffer(t,"hex"));var e=new y;e.chunks=[];for(var r=t.split(" "),i=0;i<r.length;){var n=r[i],s=u(n).toNumber();if(p.isUndefined(s)){if(!((s=parseInt(n))>0&&s<u.OP_PUSHDATA1))throw new Error("Invalid script: "+JSON.stringify(t));e.chunks.push({buf:Buffer.from(r[i+1].slice(2),"hex"),len:s,opcodenum:s}),i+=2}else if(s===u.OP_PUSHDATA1||s===u.OP_PUSHDATA2||s===u.OP_PUSHDATA4){if("0x"!==r[i+2].slice(0,2))throw new Error("Pushdata data must start with 0x");e.chunks.push({buf:Buffer.from(r[i+2].slice(2),"hex"),len:parseInt(r[i+1]),opcodenum:s}),i+=3}else e.chunks.push({opcodenum:s}),i+=1}return e},y.prototype._chunkToString=function(t,e){var r=t.opcodenum,i="asm"===e,n="";if(t.buf)(!i&&r===u.OP_PUSHDATA1||r===u.OP_PUSHDATA2||r===u.OP_PUSHDATA4)&&(n=n+" "+u(r).toString()),t.len>0&&(n=i?n+" "+t.buf.toString("hex"):n+" "+t.len+" 0x"+t.buf.toString("hex"));else if(void 0!==u.reverseMap[r])i?0===r?n+=" 0":79===r?n+=" -1":n=n+" "+u(r).toString():n=n+" "+u(r).toString();else{var s=r.toString(16);s.length%2!=0&&(s="0"+s),n=i?n+" "+s:n+" 0x"+s}return n},y.prototype.toASM=function(){for(var t="",e=0;e<this.chunks.length;e++){var r=this.chunks[e];t+=this._chunkToString(r,"asm")}return t.substr(1)},y.prototype.toString=function(){for(var t="",e=0;e<this.chunks.length;e++){var r=this.chunks[e];t+=this._chunkToString(r)}return t.substr(1)},y.prototype.toHex=function(){return this.toBuffer().toString("hex")},y.prototype.inspect=function(){return"<Script: "+this.toString()+">"},y.prototype.isPublicKeyHashOut=function(){return!(5!==this.chunks.length||this.chunks[0].opcodenum!==u.OP_DUP||this.chunks[1].opcodenum!==u.OP_HASH160||!this.chunks[2].buf||20!==this.chunks[2].buf.length||this.chunks[3].opcodenum!==u.OP_EQUALVERIFY||this.chunks[4].opcodenum!==u.OP_CHECKSIG)},y.prototype.isPublicKeyHashIn=function(){if(2===this.chunks.length){var t=this.chunks[0].buf,e=this.chunks[1].buf;if(t&&t.length&&48===t[0]&&e&&e.length){var r=e[0];if((4===r||6===r||7===r)&&65===e.length)return!0;if((3===r||2===r)&&33===e.length)return!0}}return!1},y.prototype.getPublicKey=function(){return c.checkState(this.isPublicKeyOut(),"Can't retrieve PublicKey from a non-PK output"),this.chunks[0].buf},y.prototype.getPublicKeyHash=function(){return c.checkState(this.isPublicKeyHashOut(),"Can't retrieve PublicKeyHash from a non-PKH output"),this.chunks[2].buf},y.prototype.isPublicKeyOut=function(){if(2===this.chunks.length&&this.chunks[0].buf&&this.chunks[0].buf.length&&this.chunks[1].opcodenum===u.OP_CHECKSIG){var t=this.chunks[0].buf,e=t[0],r=!1;if((4!==e&&6!==e&&7!==e||65!==t.length)&&(3!==e&&2!==e||33!==t.length)||(r=!0),r)return a.isValid(t)}return!1},y.prototype.isPublicKeyIn=function(){if(1===this.chunks.length){var t=this.chunks[0].buf;if(t&&t.length&&48===t[0])return!0}return!1},y.prototype.isScriptHashOut=function(){var t=this.toBuffer();return 23===t.length&&t[0]===u.OP_HASH160&&20===t[1]&&t[t.length-1]===u.OP_EQUAL},y.prototype.isWitnessScriptHashOut=function(){var t=this.toBuffer();return 34===t.length&&0===t[0]&&32===t[1]},y.prototype.isWitnessPublicKeyHashOut=function(){var t=this.toBuffer();return 22===t.length&&0===t[0]&&20===t[1]},y.prototype.isWitnessProgram=function(t){t||(t={});var e=this.toBuffer();return!(e.length<4||e.length>42)&&((e[0]===u.OP_0||e[0]>=u.OP_1&&e[0]<=u.OP_16)&&(e.length===e[1]+2&&(t.version=e[0],t.program=e.slice(2,e.length),!0)))},y.prototype.isScriptHashIn=function(){if(this.chunks.length<=1)return!1;var t,e=this.chunks[this.chunks.length-1].buf;if(!e)return!1;try{t=y.fromBuffer(e)}catch(t){if(t instanceof d.Script.InvalidBuffer)return!1;throw t}return t.classify()!==y.types.UNKNOWN},y.prototype.isMultisigOut=function(){return this.chunks.length>3&&u.isSmallIntOp(this.chunks[0].opcodenum)&&this.chunks.slice(1,this.chunks.length-2).every(function(t){return t.buf&&g.isBuffer(t.buf)})&&u.isSmallIntOp(this.chunks[this.chunks.length-2].opcodenum)&&this.chunks[this.chunks.length-1].opcodenum===u.OP_CHECKMULTISIG},y.prototype.isMultisigIn=function(){return this.chunks.length>=2&&0===this.chunks[0].opcodenum&&this.chunks.slice(1,this.chunks.length).every(function(t){return t.buf&&g.isBuffer(t.buf)&&h.isTxDER(t.buf)})},y.prototype.isDataOut=function(){return this.chunks.length>=1&&this.chunks[0].opcodenum===u.OP_RETURN&&(1===this.chunks.length||2===this.chunks.length&&this.chunks[1].buf&&this.chunks[1].buf.length<=y.OP_RETURN_STANDARD_SIZE&&this.chunks[1].length===this.chunks.len)},y.prototype.getData=function(){if(this.isDataOut()||this.isScriptHashOut())return p.isUndefined(this.chunks[1])?Buffer.alloc(0):Buffer.from(this.chunks[1].buf);if(this.isPublicKeyHashOut())return Buffer.from(this.chunks[2].buf);throw new Error("Unrecognized script type to get data from")},y.prototype.isPushOnly=function(){return p.every(this.chunks,function(t){return t.opcodenum<=u.OP_16})},(y.types={}).UNKNOWN="Unknown",y.types.PUBKEY_OUT="Pay to public key",y.types.PUBKEY_IN="Spend from public key",y.types.PUBKEYHASH_OUT="Pay to public key hash",y.types.PUBKEYHASH_IN="Spend from public key hash",y.types.SCRIPTHASH_OUT="Pay to script hash",y.types.SCRIPTHASH_IN="Spend from script hash",y.types.MULTISIG_OUT="Pay to multisig",y.types.MULTISIG_IN="Spend from multisig",y.types.DATA_OUT="Data push",y.OP_RETURN_STANDARD_SIZE=80,y.prototype.classify=function(){if(this._isInput)return this.classifyInput();if(this._isOutput)return this.classifyOutput();var t=this.classifyOutput();return t!=y.types.UNKNOWN?t:this.classifyInput()},(y.outputIdentifiers={}).PUBKEY_OUT=y.prototype.isPublicKeyOut,y.outputIdentifiers.PUBKEYHASH_OUT=y.prototype.isPublicKeyHashOut,y.outputIdentifiers.MULTISIG_OUT=y.prototype.isMultisigOut,y.outputIdentifiers.SCRIPTHASH_OUT=y.prototype.isScriptHashOut,y.outputIdentifiers.DATA_OUT=y.prototype.isDataOut,y.prototype.classifyOutput=function(){for(var t in y.outputIdentifiers)if(y.outputIdentifiers[t].bind(this)())return y.types[t];return y.types.UNKNOWN},(y.inputIdentifiers={}).PUBKEY_IN=y.prototype.isPublicKeyIn,y.inputIdentifiers.PUBKEYHASH_IN=y.prototype.isPublicKeyHashIn,y.inputIdentifiers.MULTISIG_IN=y.prototype.isMultisigIn,y.inputIdentifiers.SCRIPTHASH_IN=y.prototype.isScriptHashIn,y.prototype.classifyInput=function(){for(var t in y.inputIdentifiers)if(y.inputIdentifiers[t].bind(this)())return y.types[t];return y.types.UNKNOWN},y.prototype.isStandard=function(){return this.classify()!==y.types.UNKNOWN},y.prototype.prepend=function(t){return this._addByType(t,!0),this},y.prototype.equals=function(t){if(c.checkState(t instanceof y,"Must provide another script"),this.chunks.length!==t.chunks.length)return!1;var e;for(e=0;e<this.chunks.length;e++){if(g.isBuffer(this.chunks[e].buf)&&!g.isBuffer(t.chunks[e].buf))return!1;if(g.isBuffer(this.chunks[e].buf)&&!g.equals(this.chunks[e].buf,t.chunks[e].buf))return!1;if(this.chunks[e].opcodenum!==t.chunks[e].opcodenum)return!1}return!0},y.prototype.add=function(t){return this._addByType(t,!1),this},y.prototype._addByType=function(t,e){if("string"==typeof t)this._addOpcode(t,e);else if("number"==typeof t)this._addOpcode(t,e);else if(t instanceof u)this._addOpcode(t,e);else if(g.isBuffer(t))this._addBuffer(t,e);else if(t instanceof y)this.chunks=this.chunks.concat(t.chunks);else{if("object"!=typeof t)throw new Error("Invalid script chunk");this._insertAtPosition(t,e)}},y.prototype._insertAtPosition=function(t,e){e?this.chunks.unshift(t):this.chunks.push(t)},y.prototype._addOpcode=function(t,e){var r;return r="number"==typeof t?t:t instanceof u?t.toNumber():u(t).toNumber(),this._insertAtPosition({opcodenum:r},e),this},y.prototype._addBuffer=function(t,e){var r,i=t.length;if(i>=0&&i<u.OP_PUSHDATA1)r=i;else if(i<Math.pow(2,8))r=u.OP_PUSHDATA1;else if(i<Math.pow(2,16))r=u.OP_PUSHDATA2;else{if(!(i<Math.pow(2,32)))throw new Error("You can't push that much data");r=u.OP_PUSHDATA4}return this._insertAtPosition({buf:t,len:i,opcodenum:r},e),this},y.prototype.hasCodeseparators=function(){for(var t=0;t<this.chunks.length;t++)if(this.chunks[t].opcodenum===u.OP_CODESEPARATOR)return!0;return!1},y.prototype.removeCodeseparators=function(){for(var t=[],e=0;e<this.chunks.length;e++)this.chunks[e].opcodenum!==u.OP_CODESEPARATOR&&t.push(this.chunks[e]);return this.chunks=t,this},y.buildMultisigOut=function(t,e,r){c.checkArgument(e<=t.length,"Number of required signatures must be less than or equal to the number of public keys"),r=r||{};var i=new y;i.add(u.smallInt(e));var n=t=p.map(t,a);r.noSorting||(n=p.sortBy(t,function(t){return t.toString("hex")}));for(var s=0;s<n.length;s++){var o=n[s];i.add(o.toBuffer())}return i.add(u.smallInt(t.length)),i.add(u.OP_CHECKMULTISIG),i},y.buildWitnessMultisigOutFromScript=function(t){if(t instanceof y){var e=new y;return e.add(u.OP_0),e.add(o.sha256(t.toBuffer())),e}throw new TypeError("First argument is expected to be a p2sh script")},y.buildMultisigIn=function(t,e,r,i){c.checkArgument(p.isArray(t)),c.checkArgument(p.isNumber(e)),c.checkArgument(p.isArray(r)),i=i||{};var n=new y;return n.add(u.OP_0),p.each(r,function(t){c.checkArgument(g.isBuffer(t),"Signatures must be an array of Buffers"),n.add(t)}),n},y.buildP2SHMultisigIn=function(t,e,r,i){c.checkArgument(p.isArray(t)),c.checkArgument(p.isNumber(e)),c.checkArgument(p.isArray(r)),i=i||{};var n=new y;return n.add(u.OP_0),p.each(r,function(t){c.checkArgument(g.isBuffer(t),"Signatures must be an array of Buffers"),n.add(t)}),n.add((i.cachedMultisig||y.buildMultisigOut(t,e,i)).toBuffer()),n},y.buildPublicKeyHashOut=function(t){c.checkArgument(!p.isUndefined(t)),c.checkArgument(t instanceof a||t instanceof i||p.isString(t)),t instanceof a?t=t.toAddress():p.isString(t)&&(t=new i(t));var e=new y;return e.add(u.OP_DUP).add(u.OP_HASH160).add(t.hashBuffer).add(u.OP_EQUALVERIFY).add(u.OP_CHECKSIG),e._network=t.network,e},y.buildPublicKeyOut=function(t){c.checkArgument(t instanceof a);var e=new y;return e.add(t.toBuffer()).add(u.OP_CHECKSIG),e},y.buildDataOut=function(t,e){c.checkArgument(p.isUndefined(t)||p.isString(t)||g.isBuffer(t)),p.isString(t)&&(t=Buffer.from(t,e));var r=new y;return r.add(u.OP_RETURN),p.isUndefined(t)||r.add(t),r},y.buildScriptHashOut=function(t){c.checkArgument(t instanceof y||t instanceof i&&t.isPayToScriptHash());var e=new y;return e.add(u.OP_HASH160).add(t instanceof i?t.hashBuffer:o.sha256ripemd160(t.toBuffer())).add(u.OP_EQUAL),e._network=t._network||t.network,e},y.buildPublicKeyIn=function(t,e){c.checkArgument(t instanceof h||g.isBuffer(t)),c.checkArgument(p.isUndefined(e)||p.isNumber(e)),t instanceof h&&(t=t.toBuffer());var r=new y;return r.add(g.concat([t,g.integerAsSingleByteBuffer(e||h.SIGHASH_ALL)])),r},y.buildPublicKeyHashIn=function(t,e,r){return c.checkArgument(e instanceof h||g.isBuffer(e)),c.checkArgument(p.isUndefined(r)||p.isNumber(r)),e instanceof h&&(e=e.toBuffer()),(new y).add(g.concat([e,g.integerAsSingleByteBuffer(r||h.SIGHASH_ALL)])).add(new a(t).toBuffer())},y.empty=function(){return new y},y.prototype.toScriptHashOut=function(){return y.buildScriptHashOut(this)},y.fromAddress=function(t){if((t=i(t)).isPayToScriptHash())return y.buildScriptHashOut(t);if(t.isPayToPublicKeyHash())return y.buildPublicKeyHashOut(t);throw new d.Script.UnrecognizedAddress(t)},y.prototype.getAddressInfo=function(t){if(this._isInput)return this._getInputAddressInfo();if(this._isOutput)return this._getOutputAddressInfo();var e=this._getOutputAddressInfo();return e||this._getInputAddressInfo()},y.prototype._getOutputAddressInfo=function(){var t={};if(this.isScriptHashOut())t.hashBuffer=this.getData(),t.type=i.PayToScriptHash;else{if(!this.isPublicKeyHashOut())return!1;t.hashBuffer=this.getData(),t.type=i.PayToPublicKeyHash}return t},y.prototype._getInputAddressInfo=function(){var t={};if(this.isPublicKeyHashIn())t.hashBuffer=o.sha256ripemd160(this.chunks[1].buf),t.type=i.PayToPublicKeyHash;else{if(!this.isScriptHashIn())return!1;t.hashBuffer=o.sha256ripemd160(this.chunks[this.chunks.length-1].buf),t.type=i.PayToScriptHash}return t},y.prototype.toAddress=function(t){var e=this.getAddressInfo();return!!e&&(e.network=f.get(t)||this._network||f.defaultNetwork,new i(e))},y.prototype.findAndDelete=function(t){for(var e=t.toBuffer().toString("hex"),r=0;r<this.chunks.length;r++){e===y({chunks:[this.chunks[r]]}).toBuffer().toString("hex")&&this.chunks.splice(r,1)}return this},y.prototype.checkMinimalPush=function(t){var e=this.chunks[t],r=e.buf,i=e.opcodenum;return!r||(0===r.length?i===u.OP_0:1===r.length&&r[0]>=1&&r[0]<=16?i===u.OP_1+(r[0]-1):1===r.length&&129===r[0]?i===u.OP_1NEGATE:r.length<=75?i===r.length:r.length<=255?i===u.OP_PUSHDATA1:!(r.length<=65535)||i===u.OP_PUSHDATA2)},y.prototype._decodeOP_N=function(t){if(t===u.OP_0)return 0;if(t>=u.OP_1&&t<=u.OP_16)return t-(u.OP_1-1);throw new Error("Invalid opcode: "+JSON.stringify(t))},y.prototype.getSignatureOperationsCount=function(t){t=!!p.isUndefined(t)||t;var e=this,r=0,i=u.OP_INVALIDOPCODE;return p.each(e.chunks,function(n){var s=n.opcodenum;s==u.OP_CHECKSIG||s==u.OP_CHECKSIGVERIFY?r++:s!=u.OP_CHECKMULTISIG&&s!=u.OP_CHECKMULTISIGVERIFY||(t&&i>=u.OP_1&&i<=u.OP_16?r+=e._decodeOP_N(i):r+=20),i=s}),r},t.exports=y},function(t,e,r){"use strict";var i=r(0),n=r(1),s=r(3),o=r(8),u=r(16),a=r(33);function h(t){if(!(this instanceof h))return new h(t);n.checkArgument(i.isObject(t),"Must provide an object from where to extract data");var e=t.address?new u(t.address):void 0,r=t.txid?t.txid:t.txId;if(!r||!s.isHexaString(r)||r.length>64)throw new Error("Invalid TXID in object",t);var f=i.isUndefined(t.vout)?t.outputIndex:t.vout;if(!i.isNumber(f))throw new Error("Invalid outputIndex, received "+f);n.checkArgument(!i.isUndefined(t.scriptPubKey)||!i.isUndefined(t.script),"Must provide the scriptPubKey for that output!");var c=new o(t.scriptPubKey||t.script);n.checkArgument(!i.isUndefined(t.amount)||!i.isUndefined(t.satoshis),"Must provide an amount for the output");var p=i.isUndefined(t.amount)?t.satoshis:new a.fromBTC(t.amount).toSatoshis();n.checkArgument(i.isNumber(p),"Amount must be a number"),s.defineImmutable(this,{address:e,txId:r,outputIndex:f,script:c,satoshis:p})}h.prototype.inspect=function(){return"<UnspentOutput: "+this.txId+":"+this.outputIndex+", satoshis: "+this.satoshis+", address: "+this.address+">"},h.prototype.toString=function(){return this.txId+":"+this.outputIndex},h.fromObject=function(t){return new h(t)},h.prototype.toObject=h.prototype.toJSON=function(){return{address:this.address?this.address.toString():void 0,txid:this.txId,vout:this.outputIndex,scriptPubKey:this.script.toBuffer().toString("hex"),amount:a.fromSatoshis(this.satoshis).toBTC()}},t.exports=h},function(t,e,r){"use strict";var i=r(0),n=r(27),s=r(2),o=r(12),u=r(9),a=r(5),h=(r(3),r(25)),f=r(6),c=r(1);function p(t){if(!(this instanceof p))return new p(t);var e={};if(s.isBuffer(t))e=p._fromBufferReader(o(t));else{if(!i.isObject(t))throw new TypeError("Unrecognized argument for MerkleBlock");e={header:t.header instanceof n?t.header:n.fromObject(t.header),numTransactions:t.numTransactions,hashes:t.hashes,flags:t.flags}}return i.extend(this,e),this._flagBitsUsed=0,this._hashesUsed=0,this}p.fromBuffer=function(t){return p.fromBufferReader(o(t))},p.fromBufferReader=function(t){return new p(p._fromBufferReader(t))},p.prototype.toBuffer=function(){return this.toBufferWriter().concat()},p.prototype.toBufferWriter=function(t){t||(t=new u),t.write(this.header.toBuffer()),t.writeUInt32LE(this.numTransactions),t.writeVarintNum(this.hashes.length);for(var e=0;e<this.hashes.length;e++)t.write(Buffer.from(this.hashes[e],"hex"));for(t.writeVarintNum(this.flags.length),e=0;e<this.flags.length;e++)t.writeUInt8(this.flags[e]);return t},p.prototype.toObject=p.prototype.toJSON=function(){return{header:this.header.toObject(),numTransactions:this.numTransactions,hashes:this.hashes,flags:this.flags}},p.prototype.validMerkleTree=function(){if(c.checkState(i.isArray(this.flags),"MerkleBlock flags is not an array"),c.checkState(i.isArray(this.hashes),"MerkleBlock hashes is not an array"),this.hashes.length>this.numTransactions)return!1;if(8*this.flags.length<this.hashes.length)return!1;var t=this._calcTreeHeight(),e={hashesUsed:0,flagBitsUsed:0},r=this._traverseMerkleTree(t,0,e);return e.hashesUsed===this.hashes.length&&s.equals(r,this.header.merkleRoot)},p.prototype.filterdTxsHash=function(){if(c.checkState(i.isArray(this.flags),"MerkleBlock flags is not an array"),c.checkState(i.isArray(this.hashes),"MerkleBlock hashes is not an array"),this.hashes.length>this.numTransactions)throw new f.MerkleBlock.InvalidMerkleTree;if(8*this.flags.length<this.hashes.length)throw new f.MerkleBlock.InvalidMerkleTree;if(1===this.hashes.length)return[];var t=this._calcTreeHeight(),e={hashesUsed:0,flagBitsUsed:0},r=this._traverseMerkleTree(t,0,e,!0);if(e.hashesUsed!==this.hashes.length)throw new f.MerkleBlock.InvalidMerkleTree;return r},p.prototype._traverseMerkleTree=function(t,e,r,i){(r=r||{}).txs=r.txs||[],r.flagBitsUsed=r.flagBitsUsed||0,r.hashesUsed=r.hashesUsed||0;i=i||!1;if(r.flagBitsUsed>8*this.flags.length)return null;var n=this.flags[r.flagBitsUsed>>3]>>>(7&r.flagBitsUsed++)&1;if(0!==t&&n){var s=this._traverseMerkleTree(t-1,2*e,r),o=s;return 2*e+1<this._calcTreeWidth(t-1)&&(o=this._traverseMerkleTree(t-1,2*e+1,r)),i?r.txs:a.sha256sha256(new Buffer.concat([s,o]))}if(r.hashesUsed>=this.hashes.length)return null;var u=this.hashes[r.hashesUsed++];return 0===t&&n&&r.txs.push(u),Buffer.from(u,"hex")},p.prototype._calcTreeWidth=function(t){return this.numTransactions+(1<<t)-1>>t},p.prototype._calcTreeHeight=function(){for(var t=0;this._calcTreeWidth(t)>1;)t++;return t},p.prototype.hasTransaction=function(t){c.checkArgument(!i.isUndefined(t),"tx cannot be undefined"),c.checkArgument(t instanceof h||"string"==typeof t,'Invalid tx given, tx must be a "string" or "Transaction"');var e=t;t instanceof h&&(e=s.reverse(Buffer.from(t.id,"hex")).toString("hex"));var r=[],n=this._calcTreeHeight();return this._traverseMerkleTree(n,0,{txs:r}),-1!==r.indexOf(e)},p._fromBufferReader=function(t){c.checkState(!t.finished(),"No merkleblock data received");var e={};e.header=n.fromBufferReader(t),e.numTransactions=t.readUInt32LE();var r=t.readVarintNum();e.hashes=[];for(var i=0;i<r;i++)e.hashes.push(t.read(32).toString("hex"));var s=t.readVarintNum();for(e.flags=[],i=0;i<s;i++)e.flags.push(t.readUInt8());return e},p.fromObject=function(t){return new p(t)},t.exports=p},function(t,e,r){"use strict";var i=r(22),n=r(10),s=r(0),o=r(1),u=r(4),a=r(24),h=r(18),f=r(5),c=r(15),p=r(17),d=r(23),l=r(26),g=r(6),m=g.HDPrivateKey,y=r(2),_=r(3);function S(t){if(t instanceof S)return t;if(!(this instanceof S))return new S(t);if(!t)return this._generateRandomly();if(c.get(t))return this._generateRandomly(t);if(s.isString(t)||y.isBuffer(t))if(S.isValidSerialized(t))this._buildFromSerialized(t);else if(_.isValidJSON(t))this._buildFromJSON(t);else{if(!y.isBuffer(t)||!S.isValidSerialized(t.toString()))throw S.getSerializedError(t);this._buildFromSerialized(t.toString())}else{if(!s.isObject(t))throw new m.UnrecognizedArgument(t);this._buildFromObject(t)}}S.isValidPath=function(t,e){if(s.isString(t)){var r=S._getDerivationIndexes(t);return null!==r&&s.every(r,S.isValidPath)}return!!s.isNumber(t)&&(t<S.Hardened&&!0===e&&(t+=S.Hardened),t>=0&&t<S.MaxIndex)},S._getDerivationIndexes=function(t){var e=t.split("/");if(s.includes(S.RootElementAlias,t))return[];if(!s.includes(S.RootElementAlias,e[0]))return null;var r=e.slice(1).map(function(t){var e="'"===t.slice(-1);if(e&&(t=t.slice(0,-1)),!t||"-"===t[0])return NaN;var r=+t;return e&&(r+=S.Hardened),r});return s.some(r,isNaN)?null:r},S.prototype.derive=function(t,e){return this.deriveNonCompliantChild(t,e)},S.prototype.deriveChild=function(t,e){if(s.isNumber(t))return this._deriveWithNumber(t,e);if(s.isString(t))return this._deriveFromString(t);throw new m.InvalidDerivationArgument(t)},S.prototype.deriveNonCompliantChild=function(t,e){if(s.isNumber(t))return this._deriveWithNumber(t,e,!0);if(s.isString(t))return this._deriveFromString(t,!0);throw new m.InvalidDerivationArgument(t)},S.prototype._deriveWithNumber=function(t,e,r){if(!S.isValidPath(t,e))throw new m.InvalidPath(t);e=t>=S.Hardened||e,t<S.Hardened&&!0===e&&(t+=S.Hardened);var s,o=y.integerAsBuffer(t);if(e&&r){var a=this.privateKey.bn.toBuffer();s=y.concat([new n.Buffer([0]),a,o])}else if(e){var h=this.privateKey.bn.toBuffer({size:32});i(32===h.length,"length of private key buffer is expected to be 32 bytes"),s=y.concat([new n.Buffer([0]),h,o])}else s=y.concat([this.publicKey.toBuffer(),o]);var c=f.sha512hmac(s,this._buffers.chainCode),l=u.fromBuffer(c.slice(0,32),{size:32}),g=c.slice(32,64),_=l.add(this.privateKey.toBigNumber()).umod(p.getN()).toBuffer({size:32});return d.isValid(_)?new S({network:this.network,depth:this.depth+1,parentFingerPrint:this.fingerPrint,childIndex:t,chainCode:g,privateKey:_}):this._deriveWithNumber(t+1,null,r)},S.prototype._deriveFromString=function(t,e){if(!S.isValidPath(t))throw new m.InvalidPath(t);return S._getDerivationIndexes(t).reduce(function(t,r){return t._deriveWithNumber(r,null,e)},this)},S.isValidSerialized=function(t,e){return!S.getSerializedError(t,e)},S.getSerializedError=function(t,e){if(!s.isString(t)&&!y.isBuffer(t))return new m.UnrecognizedArgument("Expected string or buffer");if(!a.validCharacters(t))return new g.InvalidB58Char("(unknown)",t);try{t=h.decode(t)}catch(e){return new g.InvalidB58Checksum(t)}if(t.length!==S.DataLength)return new m.InvalidLength(t);if(!s.isUndefined(e)){var r=S._validateNetwork(t,e);if(r)return r}return null},S._validateNetwork=function(t,e){var r=c.get(e);if(!r)return new g.InvalidNetworkArgument(e);var i=t.slice(0,4);return y.integerFromBuffer(i)!==r.xprivkey?new g.InvalidNetwork(i):null},S.fromString=function(t){return o.checkArgument(s.isString(t),"No valid string was provided"),new S(t)},S.fromObject=function(t){return o.checkArgument(s.isObject(t),"No valid argument was provided"),new S(t)},S.prototype._buildFromJSON=function(t){return this._buildFromObject(JSON.parse(t))},S.prototype._buildFromObject=function(t){var e={version:t.network?y.integerAsBuffer(c.get(t.network).xprivkey):t.version,depth:s.isNumber(t.depth)?y.integerAsSingleByteBuffer(t.depth):t.depth,parentFingerPrint:s.isNumber(t.parentFingerPrint)?y.integerAsBuffer(t.parentFingerPrint):t.parentFingerPrint,childIndex:s.isNumber(t.childIndex)?y.integerAsBuffer(t.childIndex):t.childIndex,chainCode:s.isString(t.chainCode)?y.hexToBuffer(t.chainCode):t.chainCode,privateKey:s.isString(t.privateKey)&&_.isHexa(t.privateKey)?y.hexToBuffer(t.privateKey):t.privateKey,checksum:t.checksum?t.checksum.length?t.checksum:y.integerAsBuffer(t.checksum):void 0};return this._buildFromBuffers(e)},S.prototype._buildFromSerialized=function(t){var e=h.decode(t),r={version:e.slice(S.VersionStart,S.VersionEnd),depth:e.slice(S.DepthStart,S.DepthEnd),parentFingerPrint:e.slice(S.ParentFingerPrintStart,S.ParentFingerPrintEnd),childIndex:e.slice(S.ChildIndexStart,S.ChildIndexEnd),chainCode:e.slice(S.ChainCodeStart,S.ChainCodeEnd),privateKey:e.slice(S.PrivateKeyStart,S.PrivateKeyEnd),checksum:e.slice(S.ChecksumStart,S.ChecksumEnd),xprivkey:t};return this._buildFromBuffers(r)},S.prototype._generateRandomly=function(t){return S.fromSeed(l.getRandomBuffer(64),t)},S.fromSeed=function(t,e){if(_.isHexaString(t)&&(t=y.hexToBuffer(t)),!Buffer.isBuffer(t))throw new m.InvalidEntropyArgument(t);if(t.length<16)throw new m.InvalidEntropyArgument.NotEnoughEntropy(t);if(t.length>64)throw new m.InvalidEntropyArgument.TooMuchEntropy(t);var r=f.sha512hmac(t,new n.Buffer("Bitcoin seed"));return new S({network:c.get(e)||c.defaultNetwork,depth:0,parentFingerPrint:0,childIndex:0,privateKey:r.slice(0,32),chainCode:r.slice(32,64)})},S.prototype._calcHDPublicKey=function(){if(!this._hdPublicKey){var t=r(42);this._hdPublicKey=new t(this)}},S.prototype._buildFromBuffers=function(t){S._validateBufferArguments(t),_.defineImmutable(this,{_buffers:t});var e=[t.version,t.depth,t.parentFingerPrint,t.childIndex,t.chainCode,y.emptyBuffer(1),t.privateKey],r=n.Buffer.concat(e);if(t.checksum&&t.checksum.length){if(t.checksum.toString()!==h.checksum(r).toString())throw new g.InvalidB58Checksum(r)}else t.checksum=h.checksum(r);var i,s=c.get(y.integerFromBuffer(t.version));i=h.encode(n.Buffer.concat(e)),t.xprivkey=Buffer.from(i);var o=new d(u.fromBuffer(t.privateKey),s),a=o.toPublicKey(),p=S.ParentFingerPrintSize,l=f.sha256ripemd160(a.toBuffer()).slice(0,p);return _.defineImmutable(this,{xprivkey:i,network:s,depth:y.integerFromSingleByteBuffer(t.depth),privateKey:o,publicKey:a,fingerPrint:l}),this._hdPublicKey=null,Object.defineProperty(this,"hdPublicKey",{configurable:!1,enumerable:!0,get:function(){return this._calcHDPublicKey(),this._hdPublicKey}}),Object.defineProperty(this,"xpubkey",{configurable:!1,enumerable:!0,get:function(){return this._calcHDPublicKey(),this._hdPublicKey.xpubkey}}),this},S._validateBufferArguments=function(t){var e=function(e,r){var n=t[e];i(y.isBuffer(n),e+" argument is not a buffer"),i(n.length===r,e+" has not the expected size: found "+n.length+", expected "+r)};e("version",S.VersionSize),e("depth",S.DepthSize),e("parentFingerPrint",S.ParentFingerPrintSize),e("childIndex",S.ChildIndexSize),e("chainCode",S.ChainCodeSize),e("privateKey",S.PrivateKeySize),t.checksum&&t.checksum.length&&e("checksum",S.CheckSumSize)},S.prototype.toString=function(){return this.xprivkey},S.prototype.inspect=function(){return"<HDPrivateKey: "+this.xprivkey+">"},S.prototype.toObject=S.prototype.toJSON=function(){return{network:c.get(y.integerFromBuffer(this._buffers.version),"xprivkey").name,depth:y.integerFromSingleByteBuffer(this._buffers.depth),fingerPrint:y.integerFromBuffer(this.fingerPrint),parentFingerPrint:y.integerFromBuffer(this._buffers.parentFingerPrint),childIndex:y.integerFromBuffer(this._buffers.childIndex),chainCode:y.bufferToHex(this._buffers.chainCode),privateKey:this.privateKey.toBuffer().toString("hex"),checksum:y.integerFromBuffer(this._buffers.checksum),xprivkey:this.xprivkey}},S.fromBuffer=function(t){return new S(t.toString())},S.prototype.toBuffer=function(){return y.copy(this._buffers.xprivkey)},S.DefaultDepth=0,S.DefaultFingerprint=0,S.DefaultChildIndex=0,S.Hardened=2147483648,S.MaxIndex=2*S.Hardened,S.RootElementAlias=["m","M","m'","M'"],S.VersionSize=4,S.DepthSize=1,S.ParentFingerPrintSize=4,S.ChildIndexSize=4,S.ChainCodeSize=32,S.PrivateKeySize=32,S.CheckSumSize=4,S.DataLength=78,S.SerializedByteSize=82,S.VersionStart=0,S.VersionEnd=S.VersionStart+S.VersionSize,S.DepthStart=S.VersionEnd,S.DepthEnd=S.DepthStart+S.DepthSize,S.ParentFingerPrintStart=S.DepthEnd,S.ParentFingerPrintEnd=S.ParentFingerPrintStart+S.ParentFingerPrintSize,S.ChildIndexStart=S.ParentFingerPrintEnd,S.ChildIndexEnd=S.ChildIndexStart+S.ChildIndexSize,S.ChainCodeStart=S.ChildIndexEnd,S.ChainCodeEnd=S.ChainCodeStart+S.ChainCodeSize,S.PrivateKeyStart=S.ChainCodeEnd+1,S.PrivateKeyEnd=S.PrivateKeyStart+S.PrivateKeySize,S.ChecksumStart=S.PrivateKeyEnd,S.ChecksumEnd=S.ChecksumStart+S.CheckSumSize,i(S.ChecksumEnd===S.SerializedByteSize),t.exports=S},function(t,e,r){"use strict";var i=r(0),n=r(1),s=r(4),o=r(24),u=r(18),a=r(5),h=r(41),f=r(15),c=r(17),p=r(11),d=r(6),l=d,g=d.HDPublicKey,m=r(22),y=r(3),_=r(2);function S(t){if(t instanceof S)return t;if(!(this instanceof S))return new S(t);if(t){if(i.isString(t)||_.isBuffer(t)){var e=S.getSerializedError(t);if(e){if(_.isBuffer(t)&&!S.getSerializedError(t.toString()))return this._buildFromSerialized(t.toString());if(e instanceof g.ArgumentIsPrivateExtended)return new h(t).hdPublicKey;throw e}return this._buildFromSerialized(t)}if(i.isObject(t))return t instanceof h?this._buildFromPrivate(t):this._buildFromObject(t);throw new g.UnrecognizedArgument(t)}throw new g.MustSupplyArgument}S.isValidPath=function(t){if(i.isString(t)){var e=h._getDerivationIndexes(t);return null!==e&&i.every(e,S.isValidPath)}return!!i.isNumber(t)&&(t>=0&&t<S.Hardened)},S.prototype.derive=function(t,e){return this.deriveChild(t,e)},S.prototype.deriveChild=function(t,e){if(i.isNumber(t))return this._deriveWithNumber(t,e);if(i.isString(t))return this._deriveFromString(t);throw new g.InvalidDerivationArgument(t)},S.prototype._deriveWithNumber=function(t,e){if(t>=S.Hardened||e)throw new g.InvalidIndexCantDeriveHardened;if(t<0)throw new g.InvalidPath(t);var r,i=_.integerAsBuffer(t),n=_.concat([this.publicKey.toBuffer(),i]),o=a.sha512hmac(n,this._buffers.chainCode),u=s.fromBuffer(o.slice(0,32),{size:32}),h=o.slice(32,64);try{r=p.fromPoint(c.getG().mul(u).add(this.publicKey.point))}catch(e){return this._deriveWithNumber(t+1)}return new S({network:this.network,depth:this.depth+1,parentFingerPrint:this.fingerPrint,childIndex:t,chainCode:h,publicKey:r})},S.prototype._deriveFromString=function(t){if(i.includes(t,"'"))throw new g.InvalidIndexCantDeriveHardened;if(!S.isValidPath(t))throw new g.InvalidPath(t);return h._getDerivationIndexes(t).reduce(function(t,e){return t._deriveWithNumber(e)},this)},S.isValidSerialized=function(t,e){return i.isNull(S.getSerializedError(t,e))},S.getSerializedError=function(t,e){if(!i.isString(t)&&!_.isBuffer(t))return new g.UnrecognizedArgument("expected buffer or string");if(!o.validCharacters(t))return new l.InvalidB58Char("(unknown)",t);try{t=u.decode(t)}catch(e){return new l.InvalidB58Checksum(t)}if(t.length!==S.DataSize)return new g.InvalidLength(t);if(!i.isUndefined(e)){var r=S._validateNetwork(t,e);if(r)return r}var n=_.integerFromBuffer(t.slice(0,4));return n===f.livenet.xprivkey||n===f.testnet.xprivkey?new g.ArgumentIsPrivateExtended:null},S._validateNetwork=function(t,e){var r=f.get(e);if(!r)return new l.InvalidNetworkArgument(e);var i=t.slice(S.VersionStart,S.VersionEnd);return _.integerFromBuffer(i)!==r.xpubkey?new l.InvalidNetwork(i):null},S.prototype._buildFromPrivate=function(t){var e=i.clone(t._buffers),r=c.getG().mul(s.fromBuffer(e.privateKey));return e.publicKey=c.pointToCompressed(r),e.version=_.integerAsBuffer(f.get(_.integerFromBuffer(e.version)).xpubkey),e.privateKey=void 0,e.checksum=void 0,e.xprivkey=void 0,this._buildFromBuffers(e)},S.prototype._buildFromObject=function(t){var e={version:t.network?_.integerAsBuffer(f.get(t.network).xpubkey):t.version,depth:i.isNumber(t.depth)?_.integerAsSingleByteBuffer(t.depth):t.depth,parentFingerPrint:i.isNumber(t.parentFingerPrint)?_.integerAsBuffer(t.parentFingerPrint):t.parentFingerPrint,childIndex:i.isNumber(t.childIndex)?_.integerAsBuffer(t.childIndex):t.childIndex,chainCode:i.isString(t.chainCode)?_.hexToBuffer(t.chainCode):t.chainCode,publicKey:i.isString(t.publicKey)?_.hexToBuffer(t.publicKey):_.isBuffer(t.publicKey)?t.publicKey:t.publicKey.toBuffer(),checksum:i.isNumber(t.checksum)?_.integerAsBuffer(t.checksum):t.checksum};return this._buildFromBuffers(e)},S.prototype._buildFromSerialized=function(t){var e=u.decode(t),r={version:e.slice(S.VersionStart,S.VersionEnd),depth:e.slice(S.DepthStart,S.DepthEnd),parentFingerPrint:e.slice(S.ParentFingerPrintStart,S.ParentFingerPrintEnd),childIndex:e.slice(S.ChildIndexStart,S.ChildIndexEnd),chainCode:e.slice(S.ChainCodeStart,S.ChainCodeEnd),publicKey:e.slice(S.PublicKeyStart,S.PublicKeyEnd),checksum:e.slice(S.ChecksumStart,S.ChecksumEnd),xpubkey:t};return this._buildFromBuffers(r)},S.prototype._buildFromBuffers=function(t){S._validateBufferArguments(t),y.defineImmutable(this,{_buffers:t});var e=[t.version,t.depth,t.parentFingerPrint,t.childIndex,t.chainCode,t.publicKey],r=_.concat(e),i=u.checksum(r);if(t.checksum&&t.checksum.length){if(t.checksum.toString("hex")!==i.toString("hex"))throw new l.InvalidB58Checksum(r,i)}else t.checksum=i;var n,s=f.get(_.integerFromBuffer(t.version));n=u.encode(_.concat(e)),t.xpubkey=Buffer.from(n);var o=new p(t.publicKey,{network:s}),h=S.ParentFingerPrintSize,c=a.sha256ripemd160(o.toBuffer()).slice(0,h);return y.defineImmutable(this,{xpubkey:n,network:s,depth:_.integerFromSingleByteBuffer(t.depth),publicKey:o,fingerPrint:c}),this},S._validateBufferArguments=function(t){var e=function(e,r){var i=t[e];m(_.isBuffer(i),e+" argument is not a buffer, it's "+typeof i),m(i.length===r,e+" has not the expected size: found "+i.length+", expected "+r)};e("version",S.VersionSize),e("depth",S.DepthSize),e("parentFingerPrint",S.ParentFingerPrintSize),e("childIndex",S.ChildIndexSize),e("chainCode",S.ChainCodeSize),e("publicKey",S.PublicKeySize),t.checksum&&t.checksum.length&&e("checksum",S.CheckSumSize)},S.fromString=function(t){return n.checkArgument(i.isString(t),"No valid string was provided"),new S(t)},S.fromObject=function(t){return n.checkArgument(i.isObject(t),"No valid argument was provided"),new S(t)},S.prototype.toString=function(){return this.xpubkey},S.prototype.inspect=function(){return"<HDPublicKey: "+this.xpubkey+">"},S.prototype.toObject=S.prototype.toJSON=function(){return{network:f.get(_.integerFromBuffer(this._buffers.version)).name,depth:_.integerFromSingleByteBuffer(this._buffers.depth),fingerPrint:_.integerFromBuffer(this.fingerPrint),parentFingerPrint:_.integerFromBuffer(this._buffers.parentFingerPrint),childIndex:_.integerFromBuffer(this._buffers.childIndex),chainCode:_.bufferToHex(this._buffers.chainCode),publicKey:this.publicKey.toString(),checksum:_.integerFromBuffer(this._buffers.checksum),xpubkey:this.xpubkey}},S.fromBuffer=function(t){return new S(t)},S.prototype.toBuffer=function(){return _.copy(this._buffers.xpubkey)},S.Hardened=2147483648,S.RootElementAlias=["m","M"],S.VersionSize=4,S.DepthSize=1,S.ParentFingerPrintSize=4,S.ChildIndexSize=4,S.ChainCodeSize=32,S.PublicKeySize=33,S.CheckSumSize=4,S.DataSize=78,S.SerializedByteSize=82,S.VersionStart=0,S.VersionEnd=S.VersionStart+S.VersionSize,S.DepthStart=S.VersionEnd,S.DepthEnd=S.DepthStart+S.DepthSize,S.ParentFingerPrintStart=S.DepthEnd,S.ParentFingerPrintEnd=S.ParentFingerPrintStart+S.ParentFingerPrintSize,S.ChildIndexStart=S.ParentFingerPrintEnd,S.ChildIndexEnd=S.ChildIndexStart+S.ChildIndexSize,S.ChainCodeStart=S.ChildIndexEnd,S.ChainCodeEnd=S.ChainCodeStart+S.ChainCodeSize,S.PublicKeyStart=S.ChainCodeEnd,S.PublicKeyEnd=S.PublicKeyStart+S.PublicKeySize,S.ChecksumStart=S.PublicKeyEnd,S.ChecksumEnd=S.ChecksumStart+S.CheckSumSize,m(S.PublicKeyEnd===S.DataSize),m(S.ChecksumEnd===S.SerializedByteSize),t.exports=S},function(t,e,r){"use strict";var i=t.exports;i.version="v"+r(44).version,i.versionGuard=function(t){if(void 0!==t){throw new Error("More than one instance of bitcore-lib found. Please make sure to require bitcore-lib and check that submodules do not also include their own bitcore-lib dependency.")}},i.versionGuard(global._bitcore),global._bitcore=i.version,i.crypto={},i.crypto.BN=r(4),i.crypto.ECDSA=r(28),i.crypto.Hash=r(5),i.crypto.Random=r(26),i.crypto.Point=r(17),i.crypto.Signature=r(7),i.encoding={},i.encoding.Base58=r(24),i.encoding.Base58Check=r(18),i.encoding.BufferReader=r(12),i.encoding.BufferWriter=r(9),i.encoding.Varint=r(53),i.util={},i.util.buffer=r(2),i.util.js=r(3),i.util.preconditions=r(1),i.errors=r(6),i.Address=r(16),i.Block=r(54),i.MerkleBlock=r(40),i.BlockHeader=r(27),i.HDPrivateKey=r(41),i.HDPublicKey=r(42),i.Networks=r(15),i.Opcode=r(29),i.PrivateKey=r(23),i.PublicKey=r(11),i.Script=r(8),i.Transaction=r(25),i.URI=r(56),i.Unit=r(33),i.deps={},i.deps.bnjs=r(34),i.deps.bs58=r(37),i.deps.Buffer=Buffer,i.deps.elliptic=r(35),i.deps._=r(0),i.Transaction.sighash=r(14)},function(t){t.exports={name:"mix-lib",version:"1.0.9",description:"A pure and powerful JavaScript Multiple Coins library.",author:"GeekCash Team <hello@geekcash.org>",main:"./dist/index.js",scripts:{dev:"cross-env NODE_ENV=development webpack --progress --watch --colors",prod:"cross-env NODE_ENV=production webpack -p --progress --colors",lint:"gulp lint",test:"gulp test",coverage:"gulp coverage",build:"gulp"},keywords:["Bitcoin","GeekCash","Geek","dash","transaction","address","p2p","ecies","cryptocurrency","blockchain","payment","bip21","bip32","bip37","bip69","bip70","multisig","CommandCoin","PIVX","ColossusXT","Aegeus","MetaCash","LightPayCoin","Northern","DeepOnion","DigiByte","Zcash","Stakenet","MMOCoin","Stakecube","BitcoinCash","Alqo","BlockNet","Transcendence","QubeNet","SolarCoin","Bettex","LogisCoin","CatoCoin"],repository:{type:"git",url:"https://github.com/geekcash/mix-lib.git"},browser:{request:"browser-request"},dependencies:{"bn.js":"=4.11.8",bs58:"=4.0.1","buffer-compare":"=1.1.1",elliptic:"=6.4.0",inherits:"=2.0.1",lodash:"=4.17.4"},devDependencies:{"bitcore-build":"https://github.com/bitpay/bitcore-build.git#d4e8b2b2f1e2c065c3a807dcb6a6250f61d67ab3",brfs:"^1.2.0",chai:"^1.10.0",gulp:"^3.8.10",sinon:"^1.13.0","uglifyjs-webpack-plugin":"^1.3.0","babel-core":"^6.26.3","babel-loader":"^7.1.2","babel-plugin-syntax-dynamic-import":"^6.18.0","babel-plugin-transform-async-to-generator":"^6.24.1","babel-plugin-transform-runtime":"^6.23.0","babel-preset-env":"^1.6.1","babel-preset-es2015":"^6.24.1","babel-preset-stage-0":"^6.24.1","babel-preset-stage-2":"^6.24.1","clean-webpack-plugin":"^0.1.19","cross-env":"^5.1.4",webpack:"^4.18.0","webpack-cli":"^3.1.0","webpack-node-externals":"^1.6.0"},license:"MIT"}},function(t,e,r){"use strict";t.exports=[{name:"InvalidB58Char",message:"Invalid Base58 character: {0} in {1}"},{name:"InvalidB58Checksum",message:"Invalid Base58 checksum for {0}"},{name:"InvalidNetwork",message:"Invalid version for network: got {0}"},{name:"InvalidState",message:"Invalid state: {0}"},{name:"NotImplemented",message:"Function {0} was not implemented yet"},{name:"InvalidNetworkArgument",message:'Invalid network: must be "livenet" or "testnet", got {0}'},{name:"InvalidArgument",message:function(){return"Invalid Argument"+(arguments[0]?": "+arguments[0]:"")+(arguments[1]?" Documentation: http://bitcore.io/"+arguments[1]:"")}},{name:"AbstractMethodInvoked",message:"Abstract Method Invocation: {0}"},{name:"InvalidArgumentType",message:function(){return"Invalid Argument for "+arguments[2]+", expected "+arguments[1]+" but got "+typeof arguments[0]}},{name:"Unit",message:"Internal Error on Unit {0}",errors:[{name:"UnknownCode",message:"Unrecognized unit code: {0}"},{name:"InvalidRate",message:"Invalid exchange rate: {0}"}]},{name:"MerkleBlock",message:"Internal Error on MerkleBlock {0}",errors:[{name:"InvalidMerkleTree",message:"This MerkleBlock contain an invalid Merkle Tree"}]},{name:"Transaction",message:"Internal Error on Transaction {0}",errors:[{name:"Input",message:"Internal Error on Input {0}",errors:[{name:"MissingScript",message:"Need a script to create an input"},{name:"UnsupportedScript",message:"Unsupported input script type: {0}"},{name:"MissingPreviousOutput",message:"No previous output information."}]},{name:"NeedMoreInfo",message:"{0}"},{name:"InvalidSorting",message:"The sorting function provided did not return the change output as one of the array elements"},{name:"InvalidOutputAmountSum",message:"{0}"},{name:"MissingSignatures",message:"Some inputs have not been fully signed"},{name:"InvalidIndex",message:"Invalid index: {0} is not between 0, {1}"},{name:"UnableToVerifySignature",message:"Unable to verify signature: {0}"},{name:"DustOutputs",message:"Dust amount detected in one output"},{name:"InvalidSatoshis",message:"Output satoshis are invalid"},{name:"FeeError",message:"Internal Error on Fee {0}",errors:[{name:"TooSmall",message:"Fee is too small: {0}"},{name:"TooLarge",message:"Fee is too large: {0}"},{name:"Different",message:"Unspent value is different from specified fee: {0}"}]},{name:"ChangeAddressMissing",message:"Change address is missing"},{name:"BlockHeightTooHigh",message:"Block Height can be at most 2^32 -1"},{name:"NLockTimeOutOfRange",message:"Block Height can only be between 0 and 499 999 999"},{name:"LockTimeTooEarly",message:"Lock Time can't be earlier than UNIX date 500 000 000"}]},{name:"Script",message:"Internal Error on Script {0}",errors:[{name:"UnrecognizedAddress",message:"Expected argument {0} to be an address"},{name:"CantDeriveAddress",message:"Can't derive address associated with script {0}, needs to be p2pkh in, p2pkh out, p2sh in, or p2sh out."},{name:"InvalidBuffer",message:"Invalid script buffer: can't parse valid script from given buffer {0}"}]},{name:"HDPrivateKey",message:"Internal Error on HDPrivateKey {0}",errors:[{name:"InvalidDerivationArgument",message:"Invalid derivation argument {0}, expected string, or number and boolean"},{name:"InvalidEntropyArgument",message:"Invalid entropy: must be an hexa string or binary buffer, got {0}",errors:[{name:"TooMuchEntropy",message:'Invalid entropy: more than 512 bits is non standard, got "{0}"'},{name:"NotEnoughEntropy",message:'Invalid entropy: at least 128 bits needed, got "{0}"'}]},{name:"InvalidLength",message:"Invalid length for xprivkey string in {0}"},{name:"InvalidPath",message:"Invalid derivation path: {0}"},{name:"UnrecognizedArgument",message:'Invalid argument: creating a HDPrivateKey requires a string, buffer, json or object, got "{0}"'}]},{name:"HDPublicKey",message:"Internal Error on HDPublicKey {0}",errors:[{name:"ArgumentIsPrivateExtended",message:"Argument is an extended private key: {0}"},{name:"InvalidDerivationArgument",message:"Invalid derivation argument: got {0}"},{name:"InvalidLength",message:'Invalid length for xpubkey: got "{0}"'},{name:"InvalidPath",message:'Invalid derivation path, it should look like: "m/1/100", got "{0}"'},{name:"InvalidIndexCantDeriveHardened",message:"Invalid argument: creating a hardened path requires an HDPrivateKey"},{name:"MustSupplyArgument",message:"Must supply an argument to create a HDPublicKey"},{name:"UnrecognizedArgument",message:"Invalid argument for creation, must be string, json, buffer, or object"}]}]},function(t,e){t.exports=[{name:"GeekCash",alias:"GEEK",pubkeyhash:38,privatekey:204,scripthash:16,xpubkey:76067358,xprivkey:76066276,networkMagic:3205262269,port:6888,dnsSeeds:["ns01.geekcash.org","ns02.geekcash.org","ns03.geekcash.org","ns04.geekcash.org","ns05.geekcash.org"]},{name:"Dash",alias:"DASH",pubkeyhash:76,privatekey:204,scripthash:16,xpubkey:76067358,xprivkey:76066276,networkMagic:3205262269,port:9999,dnsSeeds:["dnsseed.darkcoin.io","dnsseed.dashdot.io","dnsseed.masternode.io","dnsseed.dashpay.io"]},{name:"Bitcoin",alias:"BTC",pubkeyhash:0,privatekey:128,scripthash:5,xpubkey:76067358,xprivkey:76066276,networkMagic:4190024921,port:8333,dnsSeeds:["seed.bitcoin.sipa.be","dnsseed.bluematt.me","dnsseed.bitcoin.dashjr.org","seed.bitcoinstats.com","seed.bitnodes.io","bitseed.xf2.org"]},{name:"BitcoinCash",alias:"BCH",pubkeyhash:0,privatekey:128,xpubkey:76067358,xprivkey:76066276,port:8333},{name:"PIVX",alias:"PIVX",pubkeyhash:30,privatekey:212,xpubkey:76067358,xprivkey:76066276,port:51472},{name:"Litecoin",alias:"LTC",pubkeyhash:48,privatekey:176,xpubkey:76067358,xprivkey:76066276,port:9333},{name:"ColossusXT",alias:"COLX",pubkeyhash:30,privatekey:212,xpubkey:76067358,xprivkey:76066276,port:51572},{name:"Aegeus",alias:"AEG",pubkeyhash:23,privatekey:151,xpubkey:76067358,xprivkey:76066276,port:9292},{name:"MetaCash",alias:"META",pubkeyhash:50,privatekey:178,xpubkey:76067358,xprivkey:76066276,port:40293},{name:"MMOCoin",alias:"MMO",pubkeyhash:50,privatekey:178,xpubkey:76067358,xprivkey:76066276},{name:"LightPayCoin",alias:"LPC",pubkeyhash:49,privatekey:179,xpubkey:76067358,xprivkey:76066276,port:39797},{name:"Northern",alias:"NORT",pubkeyhash:53,privatekey:46,xpubkey:76067358,xprivkey:76066276,port:6942},{name:"DeepOnion",alias:"ONION",pubkeyhash:31,privatekey:159,xpubkey:76067358,xprivkey:76066276},{name:"DigiByte",alias:"DGB",pubkeyhash:30,privatekey:158,xpubkey:76067358,xprivkey:76066276},{name:"Zcash",alias:"ZEC",pubkeyhash:28,privatekey:128,xpubkey:76067358,xprivkey:76066276,port:8233},{name:"Stakenet",alias:"XSN",pubkeyhash:76,privatekey:204,xpubkey:76067358,xprivkey:76066276,port:9999},{name:"Stakecube",alias:"SCC",pubkeyhash:125,privatekey:253,xpubkey:76067358,xprivkey:76066276,port:17133},{name:"Alqo",alias:"ALQ",pubkeyhash:23,privatekey:193,xpubkey:76067358,xprivkey:76066276,port:55500},{name:"Trittium",alias:"TRTT",pubkeyhash:65,privatekey:193,xpubkey:76067358,xprivkey:76066276},{name:"Blocknet",alias:"BLOCK",pubkeyhash:26,privatekey:149,xpubkey:76067358,xprivkey:76066276},{name:"CommandCoin",alias:"CMD",pubkeyhash:28,privatekey:28,xpubkey:76067358,xprivkey:76066276},{name:"Transcendence",alias:"TELOS",pubkeyhash:38,privatekey:98,xpubkey:76067358,xprivkey:76066276},{name:"QubeNet",alias:"QUB",pubkeyhash:58,privatekey:153,xpubkey:76067358,xprivkey:76066276},{name:"SolarCoin",alias:"SLR",pubkeyhash:18,privatekey:146,xpubkey:76067358,xprivkey:76066276},{name:"Bettex",alias:"BTXC",pubkeyhash:25,privatekey:239,xpubkey:76067358,xprivkey:76066276},{name:"LogisCoin",alias:"LGS",pubkeyhash:38,privatekey:227,xpubkey:76067358,xprivkey:76066276},{name:"CatoCoin",alias:"CAT",pubkeyhash:28,privatekey:156,xpubkey:76067358,xprivkey:76066276},{name:"Galilel",alias:"GALI",pubkeyhash:68,privatekey:193,xpubkey:76067358,xprivkey:76066276},{name:"French Digital Reserve",alias:"FDR",pubkeyhash:35,privatekey:122,xpubkey:76067358,xprivkey:76066276},{name:"testnet",alias:"regtest",pubkeyhash:111,privatekey:239,scripthash:196,xpubkey:70617039,xprivkey:70615956}]},function(t,e,r){"use strict";var i=r(0),n=r(38),s=r(29),o=r(4),u=r(5),a=r(7),h=r(11),f=function t(e){if(!(this instanceof t))return new t(e);e?(this.initialize(),this.set(e)):this.initialize()};f.prototype.verifyWitnessProgram=function(t,e,r,i,o){var a=new n,h=[];if(0!==t)return!(o&f.SCRIPT_VERIFY_DISCOURAGE_UPGRADABLE_WITNESS_PROGRAM)||(this.errstr="SCRIPT_ERR_DISCOURAGE_UPGRADABLE_WITNESS_PROGRAM",!1);if(32===e.length){if(0===r.length)return this.errstr="SCRIPT_ERR_WITNESS_PROGRAM_WITNESS_EMPTY",!1;var c=r[r.length-1];if(a=new n(c),u.sha256(c).toString("hex")!==e.toString("hex"))return this.errstr="SCRIPT_ERR_WITNESS_PROGRAM_MISMATCH",!1;h=r.slice(0,-1)}else{if(20!==e.length)return this.errstr="SCRIPT_ERR_WITNESS_PROGRAM_WRONG_LENGTH",!1;if(2!==r.length)return this.errstr="SCRIPT_ERR_WITNESS_PROGRAM_MISMATCH",!1;a.add(s.OP_DUP),a.add(s.OP_HASH160),a.add(e),a.add(s.OP_EQUALVERIFY),a.add(s.OP_CHECKSIG),h=r}if(this.initialize(),this.set({script:a,stack:h,sigversion:1,satoshis:i}),!this.evaluate())return!1;if(1!==this.stack.length)return this.errstr="SCRIPT_ERR_EVAL_FALSE",!1;var p=this.stack[this.stack.length-1];return!!f.castToBool(p)||(this.errstr="SCRIPT_ERR_EVAL_FALSE_IN_STACK",!1)},f.prototype.verify=function(t,e,s,o,u,a,h){var c,p=r(25);if(i.isUndefined(s)&&(s=new p),i.isUndefined(o)&&(o=0),i.isUndefined(u)&&(u=0),i.isUndefined(a)&&(a=null),i.isUndefined(h)&&(h=0),this.set({script:t,tx:s,nin:o,sigversion:0,satoshis:0,flags:u}),0!=(u&f.SCRIPT_VERIFY_SIGPUSHONLY)&&!t.isPushOnly())return this.errstr="SCRIPT_ERR_SIG_PUSHONLY",!1;if(!this.evaluate())return!1;u&f.SCRIPT_VERIFY_P2SH&&(c=this.stack.slice());var d=this.stack;if(this.initialize(),this.set({script:e,stack:d,tx:s,nin:o,flags:u}),!this.evaluate())return!1;if(0===this.stack.length)return this.errstr="SCRIPT_ERR_EVAL_FALSE_NO_RESULT",!1;var l=this.stack[this.stack.length-1];if(!f.castToBool(l))return this.errstr="SCRIPT_ERR_EVAL_FALSE_IN_STACK",!1;var g=!1;if(u&f.SCRIPT_VERIFY_WITNESS){var m={};if(e.isWitnessProgram(m)){if(g=!0,0!==t.toBuffer().length)return!1;if(!this.verifyWitnessProgram(m.version,m.program,a,h,u))return!1}}if(u&f.SCRIPT_VERIFY_P2SH&&e.isScriptHashOut()){if(!t.isPushOnly())return this.errstr="SCRIPT_ERR_SIG_PUSHONLY",!1;if(0===c.length)throw new Error("internal error - stack copy empty");var y=c[c.length-1],_=n.fromBuffer(y);if(c.pop(),this.initialize(),this.set({script:_,stack:c,tx:s,nin:o,flags:u}),!this.evaluate())return!1;if(0===c.length)return this.errstr="SCRIPT_ERR_EVAL_FALSE_NO_P2SH_STACK",!1;if(!f.castToBool(c[c.length-1]))return this.errstr="SCRIPT_ERR_EVAL_FALSE_IN_P2SH_STACK",!1;if(u&f.SCRIPT_VERIFY_WITNESS){var S={};if(_.isWitnessProgram(S)){g=!0;var b=new n;if(b.add(_.toBuffer()),t.toHex()!==b.toHex())return this.errstr="SCRIPT_ERR_WITNESS_MALLEATED_P2SH",!1;if(!this.verifyWitnessProgram(S.version,S.program,a,h,u))return!1;d=[d[0]]}}if(u&f.SCRIPT_VERIFY_WITNESS&&!g&&a.length>0)return this.errstr="SCRIPT_ERR_WITNESS_UNEXPECTED",!1}return!0},t.exports=f,f.prototype.initialize=function(t){this.stack=[],this.altstack=[],this.pc=0,this.satoshis=0,this.sigversion=0,this.pbegincodehash=0,this.nOpCount=0,this.vfExec=[],this.errstr="",this.flags=0},f.prototype.set=function(t){this.script=t.script||this.script,this.tx=t.tx||this.tx,this.nin=void 0!==t.nin?t.nin:this.nin,this.stack=t.stack||this.stack,this.altstack=t.altack||this.altstack,this.pc=void 0!==t.pc?t.pc:this.pc,this.pbegincodehash=void 0!==t.pbegincodehash?t.pbegincodehash:this.pbegincodehash,this.sigversion=void 0!==t.sigversion?t.sigversion:this.sigversion,this.satoshis=void 0!==t.satoshis?t.satoshis:this.satoshis,this.nOpCount=void 0!==t.nOpCount?t.nOpCount:this.nOpCount,this.vfExec=t.vfExec||this.vfExec,this.errstr=t.errstr||this.errstr,this.flags=void 0!==t.flags?t.flags:this.flags},f.true=Buffer.from([1]),f.false=Buffer.from([]),f.MAX_SCRIPT_ELEMENT_SIZE=520,f.LOCKTIME_THRESHOLD_BN=new o(f.LOCKTIME_THRESHOLD=5e8),f.SCRIPT_VERIFY_NONE=0,f.SCRIPT_VERIFY_DISCOURAGE_UPGRADABLE_WITNESS_PROGRAM=4096,f.SCRIPT_VERIFY_P2SH=1,f.SCRIPT_VERIFY_STRICTENC=2,f.SCRIPT_VERIFY_DERSIG=4,f.SCRIPT_VERIFY_LOW_S=8,f.SCRIPT_VERIFY_NULLDUMMY=16,f.SCRIPT_VERIFY_SIGPUSHONLY=32,f.SCRIPT_VERIFY_MINIMALDATA=64,f.SCRIPT_VERIFY_DISCOURAGE_UPGRADABLE_NOPS=128,f.SCRIPT_VERIFY_CHECKLOCKTIMEVERIFY=512,f.SCRIPT_VERIFY_WITNESS=1024,f.SCRIPT_VERIFY_DISCOURAGE_UPGRADABLE_NOPS=2048,f.castToBool=function(t){for(var e=0;e<t.length;e++)if(0!==t[e])return e!==t.length-1||128!==t[e];return!1},f.prototype.checkSignatureEncoding=function(t){if(0!=(this.flags&(f.SCRIPT_VERIFY_DERSIG|f.SCRIPT_VERIFY_LOW_S|f.SCRIPT_VERIFY_STRICTENC))&&!a.isTxDER(t))return this.errstr="SCRIPT_ERR_SIG_DER_INVALID_FORMAT",!1;if(0!=(this.flags&f.SCRIPT_VERIFY_LOW_S)){if(!a.fromTxFormat(t).hasLowS())return this.errstr="SCRIPT_ERR_SIG_DER_HIGH_S",!1}else if(0!=(this.flags&f.SCRIPT_VERIFY_STRICTENC)&&!a.fromTxFormat(t).hasDefinedHashtype())return this.errstr="SCRIPT_ERR_SIG_HASHTYPE",!1;return!0},f.prototype.checkPubkeyEncoding=function(t){return!(0!=(this.flags&f.SCRIPT_VERIFY_STRICTENC)&&!h.isValid(t))||(this.errstr="SCRIPT_ERR_PUBKEYTYPE",!1)},f.prototype.evaluate=function(){if(this.script.toBuffer().length>1e4)return this.errstr="SCRIPT_ERR_SCRIPT_SIZE",!1;try{for(;this.pc<this.script.chunks.length;){if(!this.step())return!1}if(this.stack.length+this.altstack.length>1e3)return this.errstr="SCRIPT_ERR_STACK_SIZE",!1}catch(t){return this.errstr="SCRIPT_ERR_UNKNOWN_ERROR: "+t,!1}return!(this.vfExec.length>0)||(this.errstr="SCRIPT_ERR_UNBALANCED_CONDITIONAL",!1)},f.prototype.checkLockTime=function(t){return!!(this.tx.nLockTime<f.LOCKTIME_THRESHOLD&&t.lt(f.LOCKTIME_THRESHOLD_BN)||this.tx.nLockTime>=f.LOCKTIME_THRESHOLD&&t.gte(f.LOCKTIME_THRESHOLD_BN))&&(!t.gt(new o(this.tx.nLockTime))&&!!this.tx.inputs[this.nin].isFinal())},f.prototype.step=function(){var t,e,r,c,p,d,l,g,m,y,_,S,b,v,k,I,P,O=0!=(this.flags&f.SCRIPT_VERIFY_MINIMALDATA),E=-1===this.vfExec.indexOf(!1),w=this.script.chunks[this.pc];this.pc++;var B=w.opcodenum;if(i.isUndefined(B))return this.errstr="SCRIPT_ERR_UNDEFINED_OPCODE",!1;if(w.buf&&w.buf.length>f.MAX_SCRIPT_ELEMENT_SIZE)return this.errstr="SCRIPT_ERR_PUSH_SIZE",!1;if(B>s.OP_16&&++this.nOpCount>201)return this.errstr="SCRIPT_ERR_OP_COUNT",!1;if(B===s.OP_CAT||B===s.OP_SUBSTR||B===s.OP_LEFT||B===s.OP_RIGHT||B===s.OP_INVERT||B===s.OP_AND||B===s.OP_OR||B===s.OP_XOR||B===s.OP_2MUL||B===s.OP_2DIV||B===s.OP_MUL||B===s.OP_DIV||B===s.OP_MOD||B===s.OP_LSHIFT||B===s.OP_RSHIFT)return this.errstr="SCRIPT_ERR_DISABLED_OPCODE",!1;if(E&&0<=B&&B<=s.OP_PUSHDATA4){if(O&&!this.script.checkMinimalPush(this.pc-1))return this.errstr="SCRIPT_ERR_MINIMALDATA",!1;if(w.buf){if(w.len!==w.buf.length)throw new Error("Length of push value not equal to length of data");this.stack.push(w.buf)}else this.stack.push(f.false)}else if(E||s.OP_IF<=B&&B<=s.OP_ENDIF)switch(B){case s.OP_1NEGATE:case s.OP_1:case s.OP_2:case s.OP_3:case s.OP_4:case s.OP_5:case s.OP_6:case s.OP_7:case s.OP_8:case s.OP_9:case s.OP_10:case s.OP_11:case s.OP_12:case s.OP_13:case s.OP_14:case s.OP_15:case s.OP_16:p=B-(s.OP_1-1),t=new o(p).toScriptNumBuffer(),this.stack.push(t);break;case s.OP_NOP:break;case s.OP_NOP2:case s.OP_CHECKLOCKTIMEVERIFY:if(!(this.flags&f.SCRIPT_VERIFY_CHECKLOCKTIMEVERIFY)){if(this.flags&f.SCRIPT_VERIFY_DISCOURAGE_UPGRADABLE_NOPS)return this.errstr="SCRIPT_ERR_DISCOURAGE_UPGRADABLE_NOPS",!1;break}if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;var A=o.fromScriptNumBuffer(this.stack[this.stack.length-1],O,5);if(A.lt(new o(0)))return this.errstr="SCRIPT_ERR_NEGATIVE_LOCKTIME",!1;if(!this.checkLockTime(A))return this.errstr="SCRIPT_ERR_UNSATISFIED_LOCKTIME",!1;break;case s.OP_NOP1:case s.OP_NOP3:case s.OP_NOP4:case s.OP_NOP5:case s.OP_NOP6:case s.OP_NOP7:case s.OP_NOP8:case s.OP_NOP9:case s.OP_NOP10:if(this.flags&f.SCRIPT_VERIFY_DISCOURAGE_UPGRADABLE_NOPS)return this.errstr="SCRIPT_ERR_DISCOURAGE_UPGRADABLE_NOPS",!1;break;case s.OP_IF:case s.OP_NOTIF:if(I=!1,E){if(this.stack.length<1)return this.errstr="SCRIPT_ERR_UNBALANCED_CONDITIONAL",!1;t=this.stack.pop(),I=f.castToBool(t),B===s.OP_NOTIF&&(I=!I)}this.vfExec.push(I);break;case s.OP_ELSE:if(0===this.vfExec.length)return this.errstr="SCRIPT_ERR_UNBALANCED_CONDITIONAL",!1;this.vfExec[this.vfExec.length-1]=!this.vfExec[this.vfExec.length-1];break;case s.OP_ENDIF:if(0===this.vfExec.length)return this.errstr="SCRIPT_ERR_UNBALANCED_CONDITIONAL",!1;this.vfExec.pop();break;case s.OP_VERIFY:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;if(t=this.stack[this.stack.length-1],!(I=f.castToBool(t)))return this.errstr="SCRIPT_ERR_VERIFY",!1;this.stack.pop();break;case s.OP_RETURN:return this.errstr="SCRIPT_ERR_OP_RETURN",!1;case s.OP_TOALTSTACK:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;this.altstack.push(this.stack.pop());break;case s.OP_FROMALTSTACK:if(this.altstack.length<1)return this.errstr="SCRIPT_ERR_INVALID_ALTSTACK_OPERATION",!1;this.stack.push(this.altstack.pop());break;case s.OP_2DROP:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;this.stack.pop(),this.stack.pop();break;case s.OP_2DUP:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;e=this.stack[this.stack.length-2],r=this.stack[this.stack.length-1],this.stack.push(e),this.stack.push(r);break;case s.OP_3DUP:if(this.stack.length<3)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;e=this.stack[this.stack.length-3],r=this.stack[this.stack.length-2];var T=this.stack[this.stack.length-1];this.stack.push(e),this.stack.push(r),this.stack.push(T);break;case s.OP_2OVER:if(this.stack.length<4)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;e=this.stack[this.stack.length-4],r=this.stack[this.stack.length-3],this.stack.push(e),this.stack.push(r);break;case s.OP_2ROT:if(this.stack.length<6)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;c=this.stack.splice(this.stack.length-6,2),this.stack.push(c[0]),this.stack.push(c[1]);break;case s.OP_2SWAP:if(this.stack.length<4)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;c=this.stack.splice(this.stack.length-4,2),this.stack.push(c[0]),this.stack.push(c[1]);break;case s.OP_IFDUP:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;t=this.stack[this.stack.length-1],(I=f.castToBool(t))&&this.stack.push(t);break;case s.OP_DEPTH:t=new o(this.stack.length).toScriptNumBuffer(),this.stack.push(t);break;case s.OP_DROP:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;this.stack.pop();break;case s.OP_DUP:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;this.stack.push(this.stack[this.stack.length-1]);break;case s.OP_NIP:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;this.stack.splice(this.stack.length-2,1);break;case s.OP_OVER:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;this.stack.push(this.stack[this.stack.length-2]);break;case s.OP_PICK:case s.OP_ROLL:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;if(t=this.stack[this.stack.length-1],p=(g=o.fromScriptNumBuffer(t,O)).toNumber(),this.stack.pop(),p<0||p>=this.stack.length)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;t=this.stack[this.stack.length-p-1],B===s.OP_ROLL&&this.stack.splice(this.stack.length-p-1,1),this.stack.push(t);break;case s.OP_ROT:if(this.stack.length<3)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;d=this.stack[this.stack.length-3],l=this.stack[this.stack.length-2];var R=this.stack[this.stack.length-1];this.stack[this.stack.length-3]=l,this.stack[this.stack.length-2]=R,this.stack[this.stack.length-1]=d;break;case s.OP_SWAP:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;d=this.stack[this.stack.length-2],l=this.stack[this.stack.length-1],this.stack[this.stack.length-2]=l,this.stack[this.stack.length-1]=d;break;case s.OP_TUCK:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;this.stack.splice(this.stack.length-2,0,this.stack[this.stack.length-1]);break;case s.OP_SIZE:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;g=new o(this.stack[this.stack.length-1].length),this.stack.push(g.toScriptNumBuffer());break;case s.OP_EQUAL:case s.OP_EQUALVERIFY:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;e=this.stack[this.stack.length-2],r=this.stack[this.stack.length-1];var x=e.toString("hex")===r.toString("hex");if(this.stack.pop(),this.stack.pop(),this.stack.push(x?f.true:f.false),B===s.OP_EQUALVERIFY){if(!x)return this.errstr="SCRIPT_ERR_EQUALVERIFY",!1;this.stack.pop()}break;case s.OP_1ADD:case s.OP_1SUB:case s.OP_NEGATE:case s.OP_ABS:case s.OP_NOT:case s.OP_0NOTEQUAL:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;switch(t=this.stack[this.stack.length-1],g=o.fromScriptNumBuffer(t,O),B){case s.OP_1ADD:g=g.add(o.One);break;case s.OP_1SUB:g=g.sub(o.One);break;case s.OP_NEGATE:g=g.neg();break;case s.OP_ABS:g.cmp(o.Zero)<0&&(g=g.neg());break;case s.OP_NOT:g=new o((0===g.cmp(o.Zero))+0);break;case s.OP_0NOTEQUAL:g=new o((0!==g.cmp(o.Zero))+0)}this.stack.pop(),this.stack.push(g.toScriptNumBuffer());break;case s.OP_ADD:case s.OP_SUB:case s.OP_BOOLAND:case s.OP_BOOLOR:case s.OP_NUMEQUAL:case s.OP_NUMEQUALVERIFY:case s.OP_NUMNOTEQUAL:case s.OP_LESSTHAN:case s.OP_GREATERTHAN:case s.OP_LESSTHANOREQUAL:case s.OP_GREATERTHANOREQUAL:case s.OP_MIN:case s.OP_MAX:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;switch(m=o.fromScriptNumBuffer(this.stack[this.stack.length-2],O),y=o.fromScriptNumBuffer(this.stack[this.stack.length-1],O),g=new o(0),B){case s.OP_ADD:g=m.add(y);break;case s.OP_SUB:g=m.sub(y);break;case s.OP_BOOLAND:g=new o((0!==m.cmp(o.Zero)&&0!==y.cmp(o.Zero))+0);break;case s.OP_BOOLOR:g=new o((0!==m.cmp(o.Zero)||0!==y.cmp(o.Zero))+0);break;case s.OP_NUMEQUAL:case s.OP_NUMEQUALVERIFY:g=new o((0===m.cmp(y))+0);break;case s.OP_NUMNOTEQUAL:g=new o((0!==m.cmp(y))+0);break;case s.OP_LESSTHAN:g=new o((m.cmp(y)<0)+0);break;case s.OP_GREATERTHAN:g=new o((m.cmp(y)>0)+0);break;case s.OP_LESSTHANOREQUAL:g=new o((m.cmp(y)<=0)+0);break;case s.OP_GREATERTHANOREQUAL:g=new o((m.cmp(y)>=0)+0);break;case s.OP_MIN:g=m.cmp(y)<0?m:y;break;case s.OP_MAX:g=m.cmp(y)>0?m:y}if(this.stack.pop(),this.stack.pop(),this.stack.push(g.toScriptNumBuffer()),B===s.OP_NUMEQUALVERIFY){if(!f.castToBool(this.stack[this.stack.length-1]))return this.errstr="SCRIPT_ERR_NUMEQUALVERIFY",!1;this.stack.pop()}break;case s.OP_WITHIN:if(this.stack.length<3)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;m=o.fromScriptNumBuffer(this.stack[this.stack.length-3],O),y=o.fromScriptNumBuffer(this.stack[this.stack.length-2],O);var N=o.fromScriptNumBuffer(this.stack[this.stack.length-1],O);I=y.cmp(m)<=0&&m.cmp(N)<0,this.stack.pop(),this.stack.pop(),this.stack.pop(),this.stack.push(I?f.true:f.false);break;case s.OP_RIPEMD160:case s.OP_SHA1:case s.OP_SHA256:case s.OP_HASH160:case s.OP_HASH256:if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;var C;t=this.stack[this.stack.length-1],B===s.OP_RIPEMD160?C=u.ripemd160(t):B===s.OP_SHA1?C=u.sha1(t):B===s.OP_SHA256?C=u.sha256(t):B===s.OP_HASH160?C=u.sha256ripemd160(t):B===s.OP_HASH256&&(C=u.sha256sha256(t)),this.stack.pop(),this.stack.push(C);break;case s.OP_CODESEPARATOR:this.pbegincodehash=this.pc;break;case s.OP_CHECKSIG:case s.OP_CHECKSIGVERIFY:if(this.stack.length<2)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;_=this.stack[this.stack.length-2],S=this.stack[this.stack.length-1],b=(new n).set({chunks:this.script.chunks.slice(this.pbegincodehash)});var U=(new n).add(_);if(b.findAndDelete(U),!this.checkSignatureEncoding(_)||!this.checkPubkeyEncoding(S))return!1;try{v=a.fromTxFormat(_),k=h.fromBuffer(S,!1),P=this.tx.verifySignature(v,k,this.nin,b,this.sigversion,this.satoshis)}catch(t){P=!1}if(this.stack.pop(),this.stack.pop(),this.stack.push(P?f.true:f.false),B===s.OP_CHECKSIGVERIFY){if(!P)return this.errstr="SCRIPT_ERR_CHECKSIGVERIFY",!1;this.stack.pop()}break;case s.OP_CHECKMULTISIG:case s.OP_CHECKMULTISIGVERIFY:var H=1;if(this.stack.length<H)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;var L=o.fromScriptNumBuffer(this.stack[this.stack.length-H],O).toNumber();if(L<0||L>20)return this.errstr="SCRIPT_ERR_PUBKEY_COUNT",!1;if(this.nOpCount+=L,this.nOpCount>201)return this.errstr="SCRIPT_ERR_OP_COUNT",!1;var K=++H;if(H+=L,this.stack.length<H)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;var F=o.fromScriptNumBuffer(this.stack[this.stack.length-H],O).toNumber();if(F<0||F>L)return this.errstr="SCRIPT_ERR_SIG_COUNT",!1;var D=++H;if(H+=F,this.stack.length<H)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;b=(new n).set({chunks:this.script.chunks.slice(this.pbegincodehash)});for(var M=0;M<F;M++)_=this.stack[this.stack.length-D-M],b.findAndDelete((new n).add(_));for(P=!0;P&&F>0;){if(_=this.stack[this.stack.length-D],S=this.stack[this.stack.length-K],!this.checkSignatureEncoding(_)||!this.checkPubkeyEncoding(S))return!1;var V;try{v=a.fromTxFormat(_),k=h.fromBuffer(S,!1),V=this.tx.verifySignature(v,k,this.nin,b,this.sigversion,this.satoshis)}catch(t){V=!1}V&&(D++,F--),K++,F>--L&&(P=!1)}for(;H-- >1;)this.stack.pop();if(this.stack.length<1)return this.errstr="SCRIPT_ERR_INVALID_STACK_OPERATION",!1;if(this.flags&f.SCRIPT_VERIFY_NULLDUMMY&&this.stack[this.stack.length-1].length)return this.errstr="SCRIPT_ERR_SIG_NULLDUMMY",!1;if(this.stack.pop(),this.stack.push(P?f.true:f.false),B===s.OP_CHECKMULTISIGVERIFY){if(!P)return this.errstr="SCRIPT_ERR_CHECKMULTISIGVERIFY",!1;this.stack.pop()}break;default:return this.errstr="SCRIPT_ERR_BAD_OPCODE",!1}return!0}},function(t,e){t.exports=require("buffer-compare")},function(t,e,r){"use strict";var i=r(20),n=r(1),s=(r(2),r(19)),o=r(13),u=r(14),a=r(8),h=r(7),f=r(21);function c(){s.apply(this,arguments)}i(c,s),c.prototype.getSignatures=function(t,e,r,i){n.checkState(this.output instanceof o),i=i||h.SIGHASH_ALL;var s=e.toPublicKey();return s.toString()===this.output.script.getPublicKey().toString("hex")?[new f({publicKey:s,prevTxId:this.prevTxId,outputIndex:this.outputIndex,inputIndex:r,signature:u.sign(t,e,i,r,this.output.script),sigtype:i})]:[]},c.prototype.addSignature=function(t,e){return n.checkState(this.isValidSignature(t,e),"Signature is invalid"),this.setScript(a.buildPublicKeyIn(e.signature.toDER(),e.sigtype)),this},c.prototype.clearSignatures=function(){return this.setScript(a.empty()),this},c.prototype.isFullySigned=function(){return this.script.isPublicKeyIn()},c.SCRIPT_MAX_SIZE=73,c.prototype._estimateSize=function(){return c.SCRIPT_MAX_SIZE},t.exports=c},function(t,e,r){"use strict";var i=r(20),n=r(1),s=r(2),o=r(5),u=r(19),a=r(13),h=r(14),f=r(8),c=r(7),p=r(21);function d(){u.apply(this,arguments)}i(d,u),d.prototype.getSignatures=function(t,e,r,i,u){return n.checkState(this.output instanceof a),u=u||o.sha256ripemd160(e.publicKey.toBuffer()),i=i||c.SIGHASH_ALL,s.equals(u,this.output.script.getPublicKeyHash())?[new p({publicKey:e.publicKey,prevTxId:this.prevTxId,outputIndex:this.outputIndex,inputIndex:r,signature:h.sign(t,e,i,r,this.output.script),sigtype:i})]:[]},d.prototype.addSignature=function(t,e){return n.checkState(this.isValidSignature(t,e),"Signature is invalid"),this.setScript(f.buildPublicKeyHashIn(e.publicKey,e.signature.toDER(),e.sigtype)),this},d.prototype.clearSignatures=function(){return this.setScript(f.empty()),this},d.prototype.isFullySigned=function(){return this.script.isPublicKeyHashIn()},d.SCRIPT_MAX_SIZE=107,d.prototype._estimateSize=function(){return d.SCRIPT_MAX_SIZE},t.exports=d},function(t,e,r){"use strict";var i=r(0),n=r(20),s=(r(30),r(19)),o=r(13),u=r(1),a=r(8),h=r(7),f=r(14),c=(r(11),r(2)),p=r(21);function d(t,e,r,n){s.apply(this,arguments);var o=this;e=e||t.publicKeys,r=r||t.threshold,n=n||t.signatures,this.publicKeys=i.sortBy(e,function(t){return t.toString("hex")}),u.checkState(a.buildMultisigOut(this.publicKeys,r).equals(this.output.script),"Provided public keys don't match to the provided output script"),this.publicKeyIndex={},i.each(this.publicKeys,function(t,e){o.publicKeyIndex[t.toString()]=e}),this.threshold=r,this.signatures=n?this._deserializeSignatures(n):new Array(this.publicKeys.length)}n(d,s),d.prototype.toObject=function(){var t=s.prototype.toObject.apply(this,arguments);return t.threshold=this.threshold,t.publicKeys=i.map(this.publicKeys,function(t){return t.toString()}),t.signatures=this._serializeSignatures(),t},d.prototype._deserializeSignatures=function(t){return i.map(t,function(t){if(t)return new p(t)})},d.prototype._serializeSignatures=function(){return i.map(this.signatures,function(t){if(t)return t.toObject()})},d.prototype.getSignatures=function(t,e,r,n){u.checkState(this.output instanceof o),n=n||h.SIGHASH_ALL;var s=this,a=[];return i.each(this.publicKeys,function(i){i.toString()===e.publicKey.toString()&&a.push(new p({publicKey:e.publicKey,prevTxId:s.prevTxId,outputIndex:s.outputIndex,inputIndex:r,signature:f.sign(t,e,n,r,s.output.script),sigtype:n}))}),a},d.prototype.addSignature=function(t,e){return u.checkState(!this.isFullySigned(),"All needed signatures have already been added"),u.checkArgument(!i.isUndefined(this.publicKeyIndex[e.publicKey.toString()]),"Signature has no matching public key"),u.checkState(this.isValidSignature(t,e)),this.signatures[this.publicKeyIndex[e.publicKey.toString()]]=e,this._updateScript(),this},d.prototype._updateScript=function(){return this.setScript(a.buildMultisigIn(this.publicKeys,this.threshold,this._createSignatures())),this},d.prototype._createSignatures=function(){return i.map(i.filter(this.signatures,function(t){return!i.isUndefined(t)}),function(t){return c.concat([t.signature.toDER(),c.integerAsSingleByteBuffer(t.sigtype)])})},d.prototype.clearSignatures=function(){this.signatures=new Array(this.publicKeys.length),this._updateScript()},d.prototype.isFullySigned=function(){return this.countSignatures()===this.threshold},d.prototype.countMissingSignatures=function(){return this.threshold-this.countSignatures()},d.prototype.countSignatures=function(){return i.reduce(this.signatures,function(t,e){return t+!!e},0)},d.prototype.publicKeysWithoutSignature=function(){var t=this;return i.filter(this.publicKeys,function(e){return!t.signatures[t.publicKeyIndex[e.toString()]]})},d.prototype.isValidSignature=function(t,e){return e.signature.nhashtype=e.sigtype,f.verify(t,e.signature,e.publicKey,e.inputIndex,this.output.script)},d.normalizeSignatures=function(t,e,r,i,n){return n.map(function(n){var s=null;return i=i.filter(function(i){if(s)return!0;var o=new p({signature:h.fromTxFormat(i),publicKey:n,prevTxId:e.prevTxId,outputIndex:e.outputIndex,inputIndex:r,sigtype:h.SIGHASH_ALL});return o.signature.nhashtype=o.sigtype,!f.verify(t,o.signature,o.publicKey,o.inputIndex,e.output.script)||(s=o,!1)}),s||null})},d.OPCODES_SIZE=1,d.SIGNATURE_SIZE=73,d.prototype._estimateSize=function(){return d.OPCODES_SIZE+this.threshold*d.SIGNATURE_SIZE},t.exports=d},function(t,e,r){"use strict";var i=r(0),n=r(20),s=r(19),o=r(13),u=r(1),a=r(8),h=r(7),f=r(14),c=r(32),p=r(9),d=r(2),l=r(21);function g(t,e,r,n,o){s.apply(this,arguments);var h=this;if(e=e||t.publicKeys,r=r||t.threshold,n=n||t.signatures,this.nestedWitness=!!o,this.publicKeys=i.sortBy(e,function(t){return t.toString("hex")}),this.redeemScript=a.buildMultisigOut(this.publicKeys,r),this.nestedWitness){var f=a.buildWitnessMultisigOutFromScript(this.redeemScript);u.checkState(a.buildScriptHashOut(f).equals(this.output.script),"Provided public keys don't hash to the provided output (nested witness)");var c=new a;c.add(f.toBuffer()),this.setScript(c)}else u.checkState(a.buildScriptHashOut(this.redeemScript).equals(this.output.script),"Provided public keys don't hash to the provided output");this.publicKeyIndex={},i.each(this.publicKeys,function(t,e){h.publicKeyIndex[t.toString()]=e}),this.threshold=r,this.signatures=n?this._deserializeSignatures(n):new Array(this.publicKeys.length)}n(g,s),g.prototype.toObject=function(){var t=s.prototype.toObject.apply(this,arguments);return t.threshold=this.threshold,t.publicKeys=i.map(this.publicKeys,function(t){return t.toString()}),t.signatures=this._serializeSignatures(),t},g.prototype._deserializeSignatures=function(t){return i.map(t,function(t){if(t)return new l(t)})},g.prototype._serializeSignatures=function(){return i.map(this.signatures,function(t){if(t)return t.toObject()})},g.prototype.getScriptCode=function(){var t=new p;if(this.redeemScript.hasCodeseparators())throw new Error("@TODO");var e=this.redeemScript.toBuffer();return t.writeVarintNum(e.length),t.write(e),t.toBuffer()},g.prototype.getSighash=function(t,e,r,i){var n;if(this.nestedWitness){var s=this.getScriptCode(),o=this.getSatoshisBuffer();n=c.sighash(t,i,r,s,o)}else n=f.sighash(t,i,r,this.redeemScript);return n},g.prototype.getSignatures=function(t,e,r,n){u.checkState(this.output instanceof o),n=n||h.SIGHASH_ALL;var s=this,a=[];return i.each(this.publicKeys,function(i){if(i.toString()===e.publicKey.toString()){var o;if(s.nestedWitness){var u=s.getScriptCode(),h=s.getSatoshisBuffer();o=c.sign(t,e,n,r,u,h)}else o=f.sign(t,e,n,r,s.redeemScript);a.push(new l({publicKey:e.publicKey,prevTxId:s.prevTxId,outputIndex:s.outputIndex,inputIndex:r,signature:o,sigtype:n}))}}),a},g.prototype.addSignature=function(t,e){return u.checkState(!this.isFullySigned(),"All needed signatures have already been added"),u.checkArgument(!i.isUndefined(this.publicKeyIndex[e.publicKey.toString()]),"Signature has no matching public key"),u.checkState(this.isValidSignature(t,e)),this.signatures[this.publicKeyIndex[e.publicKey.toString()]]=e,this._updateScript(),this},g.prototype._updateScript=function(){if(this.nestedWitness){for(var t=[new Buffer(0)],e=this._createSignatures(),r=0;r<e.length;r++)t.push(e[r]);t.push(this.redeemScript.toBuffer()),this.setWitnesses(t)}else{var i=a.buildP2SHMultisigIn(this.publicKeys,this.threshold,this._createSignatures(),{cachedMultisig:this.redeemScript});this.setScript(i)}return this},g.prototype._createSignatures=function(){return i.map(i.filter(this.signatures,function(t){return!i.isUndefined(t)}),function(t){return d.concat([t.signature.toDER(),d.integerAsSingleByteBuffer(t.sigtype)])})},g.prototype.clearSignatures=function(){this.signatures=new Array(this.publicKeys.length),this._updateScript()},g.prototype.isFullySigned=function(){return this.countSignatures()===this.threshold},g.prototype.countMissingSignatures=function(){return this.threshold-this.countSignatures()},g.prototype.countSignatures=function(){return i.reduce(this.signatures,function(t,e){return t+!!e},0)},g.prototype.publicKeysWithoutSignature=function(){var t=this;return i.filter(this.publicKeys,function(e){return!t.signatures[t.publicKeyIndex[e.toString()]]})},g.prototype.isValidSignature=function(t,e){if(this.nestedWitness){e.signature.nhashtype=e.sigtype;var r=this.getScriptCode(),i=this.getSatoshisBuffer();return c.verify(t,e.signature,e.publicKey,e.inputIndex,r,i)}return e.signature.nhashtype=e.sigtype,f.verify(t,e.signature,e.publicKey,e.inputIndex,this.redeemScript)},g.OPCODES_SIZE=7,g.SIGNATURE_SIZE=74,g.PUBKEY_SIZE=34,g.prototype._estimateSize=function(){return g.OPCODES_SIZE+this.threshold*g.SIGNATURE_SIZE+this.publicKeys.length*g.PUBKEY_SIZE},t.exports=g},function(t,e,r){"use strict";var i=r(9),n=r(12),s=r(4),o=function t(e){if(!(this instanceof t))return new t(e);if(Buffer.isBuffer(e))this.buf=e;else if("number"==typeof e){var r=e;this.fromNumber(r)}else if(e instanceof s){var i=e;this.fromBN(i)}else if(e){var n=e;this.set(n)}};o.prototype.set=function(t){return this.buf=t.buf||this.buf,this},o.prototype.fromString=function(t){return this.set({buf:Buffer.from(t,"hex")}),this},o.prototype.toString=function(){return this.buf.toString("hex")},o.prototype.fromBuffer=function(t){return this.buf=t,this},o.prototype.fromBufferReader=function(t){return this.buf=t.readVarintBuf(),this},o.prototype.fromBN=function(t){return this.buf=i().writeVarintBN(t).concat(),this},o.prototype.fromNumber=function(t){return this.buf=i().writeVarintNum(t).concat(),this},o.prototype.toBuffer=function(){return this.buf},o.prototype.toBN=function(){return n(this.buf).readVarintBN()},o.prototype.toNumber=function(){return n(this.buf).readVarintNum()},t.exports=o},function(t,e,r){t.exports=r(55),t.exports.BlockHeader=r(27),t.exports.MerkleBlock=r(40)},function(t,e,r){"use strict";var i=r(0),n=r(27),s=r(4),o=r(2),u=r(12),a=r(9),h=r(5),f=r(25),c=r(1);function p(t){return this instanceof p?(i.extend(this,p._from(t)),this):new p(t)}p.MAX_BLOCK_SIZE=1e6,p._from=function(t){var e={};if(o.isBuffer(t))e=p._fromBufferReader(u(t));else{if(!i.isObject(t))throw new TypeError("Unrecognized argument for Block");e=p._fromObject(t)}return e},p._fromObject=function(t){var e=[];return t.transactions.forEach(function(t){t instanceof f?e.push(t):e.push(f().fromObject(t))}),{header:n.fromObject(t.header),transactions:e}},p.fromObject=function(t){return new p(p._fromObject(t))},p._fromBufferReader=function(t){var e={};c.checkState(!t.finished(),"No block data received"),e.header=n.fromBufferReader(t);var r=t.readVarintNum();e.transactions=[];for(var i=0;i<r;i++)e.transactions.push(f().fromBufferReader(t));return e},p.fromBufferReader=function(t){return c.checkArgument(t,"br is required"),new p(p._fromBufferReader(t))},p.fromBuffer=function(t){return p.fromBufferReader(new u(t))},p.fromString=function(t){var e=Buffer.from(t,"hex");return p.fromBuffer(e)},p.fromRawBlock=function(t){o.isBuffer(t)||(t=Buffer.from(t,"binary"));var e=u(t);return e.pos=p.Values.START_OF_BLOCK,new p(p._fromBufferReader(e))},p.prototype.toObject=p.prototype.toJSON=function(){var t=[];return this.transactions.forEach(function(e){t.push(e.toObject())}),{header:this.header.toObject(),transactions:t}},p.prototype.toBuffer=function(){return this.toBufferWriter().concat()},p.prototype.toString=function(){return this.toBuffer().toString("hex")},p.prototype.toBufferWriter=function(t){t||(t=new a),t.write(this.header.toBuffer()),t.writeVarintNum(this.transactions.length);for(var e=0;e<this.transactions.length;e++)this.transactions[e].toBufferWriter(t);return t},p.prototype.getTransactionHashes=function(){var t=[];if(0===this.transactions.length)return[p.Values.NULL_HASH];for(var e=0;e<this.transactions.length;e++)t.push(this.transactions[e]._getHash());return t},p.prototype.getMerkleTree=function(){for(var t=this.getTransactionHashes(),e=0,r=this.transactions.length;r>1;r=Math.floor((r+1)/2)){for(var i=0;i<r;i+=2){var n=Math.min(i+1,r-1),s=Buffer.concat([t[e+i],t[e+n]]);t.push(h.sha256sha256(s))}e+=r}return t},p.prototype.getMerkleRoot=function(){var t=this.getMerkleTree();return t[t.length-1]},p.prototype.validMerkleRoot=function(){var t=new s(this.header.merkleRoot.toString("hex"),"hex"),e=new s(this.getMerkleRoot().toString("hex"),"hex");return 0===t.cmp(e)},p.prototype._getHash=function(){return this.header._getHash()};var d={configurable:!1,enumerable:!0,get:function(){return this._id||(this._id=this.header.id),this._id},set:i.noop};Object.defineProperty(p.prototype,"id",d),Object.defineProperty(p.prototype,"hash",d),p.prototype.inspect=function(){return"<Block "+this.id+">"},p.Values={START_OF_BLOCK:8,NULL_HASH:Buffer.from("0000000000000000000000000000000000000000000000000000000000000000","hex")},t.exports=p},function(t,e,r){"use strict";var i=r(0),n=r(57),s=r(16),o=r(33),u=function(t,e){if(!(this instanceof u))return new u(t,e);if(this.extras={},this.knownParams=e||[],this.address=this.network=this.amount=this.message=null,"string"==typeof t){var r=u.parse(t);r.amount&&(r.amount=this._parseAmount(r.amount)),this._fromObject(r)}else{if("object"!=typeof t)throw new TypeError("Unrecognized data format.");this._fromObject(t)}};u.fromString=function(t){if("string"!=typeof t)throw new TypeError("Expected a string");return new u(t)},u.fromObject=function(t){return new u(t)},u.isValid=function(t,e){try{new u(t,e)}catch(t){return!1}return!0},u.parse=function(t){var e=n.parse(t,!0);if("bitcoin:"!==e.protocol)throw new TypeError("Invalid bitcoin URI");var r=/[^:]*:\/?\/?([^?]*)/.exec(t);return e.query.address=r&&r[1]||void 0,e.query},u.Members=["address","amount","message","label","r"],u.prototype._fromObject=function(t){if(!s.isValid(t.address))throw new TypeError("Invalid bitcoin address");for(var e in this.address=new s(t.address),this.network=this.address.network,this.amount=t.amount,t)if("address"!==e&&"amount"!==e){if(/^req-/.exec(e)&&-1===this.knownParams.indexOf(e))throw Error("Unknown required argument "+e);(u.Members.indexOf(e)>-1?this:this.extras)[e]=t[e]}},u.prototype._parseAmount=function(t){if(t=Number(t),isNaN(t))throw new TypeError("Invalid amount");return o.fromBTC(t).toSatoshis()},u.prototype.toObject=u.prototype.toJSON=function(){for(var t={},e=0;e<u.Members.length;e++){var r=u.Members[e];this.hasOwnProperty(r)&&void 0!==this[r]&&(t[r]=this[r].toString())}return i.extend(t,this.extras),t},u.prototype.toString=function(){var t={};return this.amount&&(t.amount=o.fromSatoshis(this.amount).toBTC()),this.message&&(t.message=this.message),this.label&&(t.label=this.label),this.r&&(t.r=this.r),i.extend(t,this.extras),n.format({protocol:"bitcoin:",host:this.address,query:t})},u.prototype.inspect=function(){return"<URI: "+this.toString()+">"},t.exports=u},function(t,e){t.exports=require("url")}]);